{
  "configuration" : { },
  "description" : "Ландшафт Онлайн-сервиса",
  "documentation" : { },
  "id" : 1,
  "lastModifiedAgent" : "structurizr-ui",
  "lastModifiedDate" : "2025-04-04T13:28:03Z",
  "model" : {
    "deploymentNodes" : [ {
      "children" : [ {
        "description" : "Веб-сайт основного онлайн-сервиса (IP: 91.107.126.103)",
        "environment" : "Development",
        "id" : "25",
        "instances" : "1",
        "name" : "WEB-SERVER",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2.635af7c0-aa28-4fe1-b2e7-f0527472c2c3"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Хранилище статических файлов (IP: 62.109.15.25)",
        "environment" : "Development",
        "id" : "26",
        "instances" : "1",
        "name" : "STATIC-STORAGE",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2.6a60df8e-5860-48c2-b679-df842bd72409"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов PROD (IP: 212.109.221.247)",
        "environment" : "Development",
        "id" : "27",
        "instances" : "1",
        "name" : "NODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2.8cb21db1-1d41-471d-9929-5ec20e39aae6"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов DEV/STAGE (IP: 188.120.254.218)",
        "environment" : "Development",
        "id" : "28",
        "instances" : "1",
        "name" : "NODE-2",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2.c39d69b2-7906-409f-b39e-72f29f259800"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер простых расчетов DEV/STAGE/PROD (IP: 83.220.170.100)",
        "environment" : "Development",
        "id" : "29",
        "instances" : "1",
        "name" : "SINODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2.4390d368-fbc5-4f14-8714-c6e1a9ca4ce3"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      } ],
      "environment" : "Development",
      "id" : "24",
      "instances" : "1",
      "name" : "FirstVDS",
      "properties" : {
        "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.2c3bc9b9-6a07-4849-b96c-e78e153ef1d2"
      },
      "tags" : "Element,Deployment Node"
    }, {
      "children" : [ {
        "children" : [ {
          "children" : [ {
            "children" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Development",
              "id" : "35",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.43484a5d-d904-4073-bc9d-c10f11298041.15ea2f82-a724-47d3-b24b-3f113d291b5c"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "environment" : "Development",
              "id" : "36",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.43484a5d-d904-4073-bc9d-c10f11298041.f630b655-d1d7-4e5c-bdd5-14244da1ec42"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "PostgreSQL operator"
            }, {
              "description" : "3х. UI https://kafka-ui.infrastructure.kalk.pro.",
              "environment" : "Development",
              "id" : "37",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.43484a5d-d904-4073-bc9d-c10f11298041.d4740c70-f6fd-4913-a729-d22334481fac"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            } ],
            "environment" : "Development",
            "id" : "33",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Development",
              "id" : "34",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.43484a5d-d904-4073-bc9d-c10f11298041.b39e0c6b-eff0-4f4f-b316-ef46e477025b"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "infrastructure",
            "properties" : {
              "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.43484a5d-d904-4073-bc9d-c10f11298041"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "environment" : "Development",
            "id" : "38",
            "instances" : "1",
            "name" : "optistair-calc",
            "properties" : {
              "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.aaca00b4-f710-4fc0-84c6-6ed4353e6450"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "children" : [ {
              "containerInstances" : [ {
                "containerId" : "93",
                "deploymentGroups" : [ "Default" ],
                "description" : "K8s Ingress nginx\nreplicas: X1",
                "environment" : "Development",
                "id" : "128",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "6f436ddb-83d0-435a-9377-48edc4b8fc47",
                  "replicas" : "1"
                },
                "relationships" : [ {
                  "description" : "Получить статус запроса на расчёт. GET (public): /api/requests-statuses",
                  "destinationId" : "130",
                  "id" : "131",
                  "linkedRelationshipId" : "119",
                  "sourceId" : "128",
                  "technology" : "REST API"
                }, {
                  "description" : "Подтвердить получение расчёта со стороны frontend. PATCH (public): /api/request-status/send",
                  "destinationId" : "130",
                  "id" : "132",
                  "linkedRelationshipId" : "120",
                  "sourceId" : "128",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт Прямой лестницы. POST (public): /api/straight-stair/request",
                  "destinationId" : "130",
                  "id" : "133",
                  "linkedRelationshipId" : "121",
                  "sourceId" : "128",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт Г-образной лестницы. POST (public): /api/l-shape-stair/request",
                  "destinationId" : "130",
                  "id" : "134",
                  "linkedRelationshipId" : "122",
                  "sourceId" : "128",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт П-образной лестницы. POST (public): /api/u-shape-stair/request",
                  "destinationId" : "130",
                  "id" : "135",
                  "linkedRelationshipId" : "123",
                  "sourceId" : "128",
                  "technology" : "REST API"
                }, {
                  "description" : "Установить ограничения пользователя. POST (public secured): /api/user-acl",
                  "destinationId" : "130",
                  "id" : "136",
                  "linkedRelationshipId" : "124",
                  "sourceId" : "128",
                  "technology" : "REST API"
                } ],
                "tags" : "Container Instance"
              } ],
              "description" : "Получение и обновление сертификатов",
              "environment" : "Development",
              "id" : "41",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40.302cff78-dd02-4fd1-aa4d-61393204173c"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "containerInstances" : [ {
                "containerId" : "87",
                "deploymentGroups" : [ "Default" ],
                "description" : "db: optistairs\nreplicas: X1",
                "environment" : "Development",
                "id" : "129",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "1cd94f73-de7e-4583-897f-2e24a3730793",
                  "replicas" : "1"
                },
                "tags" : "Container Instance"
              } ],
              "environment" : "Development",
              "id" : "42",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40.801f0efa-1e7f-473f-8acf-69d8ed8e0468"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "postgres 17 operator 500Mi"
            }, {
              "description" : "3х. UI https://kafka-ui.infrastructure-dev.kalk.pro.",
              "environment" : "Development",
              "id" : "43",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40.72d88169-33fc-4127-a37d-d11292817796"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            }, {
              "containerInstances" : [ {
                "containerId" : "94",
                "deploymentGroups" : [ "Default" ],
                "description" : "replicas: X1",
                "environment" : "Development",
                "id" : "130",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "eda25d05-6da7-4421-93f4-15a2255ed8d2",
                  "replicas" : "1"
                },
                "relationships" : [ {
                  "description" : "Создание запросов на расчет. Получение статуса запроса. Запись и чтение результатов расчета.",
                  "destinationId" : "129",
                  "id" : "137",
                  "linkedRelationshipId" : "95",
                  "sourceId" : "130",
                  "technology" : "pgsql"
                }, {
                  "description" : "W: Размещение запроса на расчёт Прямой лестницы",
                  "destinationId" : "150",
                  "id" : "151",
                  "linkedRelationshipId" : "96",
                  "sourceId" : "130",
                  "technology" : "Kafka"
                }, {
                  "description" : "W: Размещение запроса на расчёт Г-образной лестницы",
                  "destinationId" : "153",
                  "id" : "154",
                  "linkedRelationshipId" : "97",
                  "sourceId" : "130",
                  "technology" : "Kafka"
                }, {
                  "description" : "W: Размещение запроса на расчёт П-образной лестницы",
                  "destinationId" : "156",
                  "id" : "157",
                  "linkedRelationshipId" : "98",
                  "sourceId" : "130",
                  "technology" : "Kafka"
                }, {
                  "description" : "R: Получение прогресса расчёта",
                  "destinationId" : "159",
                  "id" : "160",
                  "linkedRelationshipId" : "99",
                  "sourceId" : "130",
                  "technology" : "Kafka"
                }, {
                  "description" : "R: Получение результатов расчёта",
                  "destinationId" : "161",
                  "id" : "162",
                  "linkedRelationshipId" : "100",
                  "sourceId" : "130",
                  "technology" : "Kafka"
                } ],
                "tags" : "Container Instance"
              }, {
                "containerId" : "101",
                "deploymentGroups" : [ "Default" ],
                "description" : "replicas: X1",
                "environment" : "Development",
                "id" : "138",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "11c50997-fad3-42fe-9885-2c00da30925b",
                  "replicas" : "1"
                },
                "relationships" : [ {
                  "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /straight-stair/actual-requests",
                  "destinationId" : "130",
                  "id" : "139",
                  "linkedRelationshipId" : "102",
                  "sourceId" : "138",
                  "technology" : "REST API"
                }, {
                  "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                  "destinationId" : "130",
                  "id" : "140",
                  "linkedRelationshipId" : "103",
                  "sourceId" : "138",
                  "technology" : "REST API"
                }, {
                  "description" : "Передать результат расчёта. POST: /save-result",
                  "destinationId" : "130",
                  "id" : "141",
                  "linkedRelationshipId" : "104",
                  "sourceId" : "138",
                  "technology" : "REST API"
                }, {
                  "description" : "R: Получение запроса на расчёт Прямой лестницы",
                  "destinationId" : "150",
                  "id" : "152",
                  "linkedRelationshipId" : "105",
                  "sourceId" : "138",
                  "technology" : "Kafka"
                }, {
                  "description" : "W: Размещение результата расчёта",
                  "destinationId" : "161",
                  "id" : "163",
                  "linkedRelationshipId" : "106",
                  "sourceId" : "138",
                  "technology" : "Kafka"
                } ],
                "tags" : "Container Instance"
              }, {
                "containerId" : "107",
                "deploymentGroups" : [ "Default" ],
                "description" : "replicas: X1",
                "environment" : "Development",
                "id" : "142",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "65d0cb4f-d83b-44e7-933f-06fec393e797",
                  "replicas" : "1"
                },
                "relationships" : [ {
                  "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /l-shape-stair/actual-requests",
                  "destinationId" : "130",
                  "id" : "143",
                  "linkedRelationshipId" : "108",
                  "sourceId" : "142",
                  "technology" : "REST API"
                }, {
                  "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                  "destinationId" : "130",
                  "id" : "144",
                  "linkedRelationshipId" : "109",
                  "sourceId" : "142",
                  "technology" : "REST API"
                }, {
                  "description" : "Передать результат расчёта. POST: /save-result",
                  "destinationId" : "130",
                  "id" : "145",
                  "linkedRelationshipId" : "110",
                  "sourceId" : "142",
                  "technology" : "REST API"
                }, {
                  "description" : "R: Получение запроса на расчёт Г-образной лестницы",
                  "destinationId" : "153",
                  "id" : "155",
                  "linkedRelationshipId" : "111",
                  "sourceId" : "142",
                  "technology" : "Kafka"
                }, {
                  "description" : "W: Размещение результата расчёта",
                  "destinationId" : "161",
                  "id" : "165",
                  "linkedRelationshipId" : "112",
                  "sourceId" : "142",
                  "technology" : "Kafka"
                } ],
                "tags" : "Container Instance"
              }, {
                "containerId" : "113",
                "deploymentGroups" : [ "Default" ],
                "description" : "replicas: X1",
                "environment" : "Development",
                "id" : "146",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "8cde202d-45ac-4ee1-94f6-8825a617b643",
                  "replicas" : "1"
                },
                "relationships" : [ {
                  "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /u-shape-stair/actual-requests",
                  "destinationId" : "130",
                  "id" : "147",
                  "linkedRelationshipId" : "114",
                  "sourceId" : "146",
                  "technology" : "REST API"
                }, {
                  "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                  "destinationId" : "130",
                  "id" : "148",
                  "linkedRelationshipId" : "115",
                  "sourceId" : "146",
                  "technology" : "REST API"
                }, {
                  "description" : "Передать результат расчёта. POST: /save-result",
                  "destinationId" : "130",
                  "id" : "149",
                  "linkedRelationshipId" : "116",
                  "sourceId" : "146",
                  "technology" : "REST API"
                }, {
                  "description" : "R: Получение запроса на расчёт П-образной лестницы",
                  "destinationId" : "156",
                  "id" : "158",
                  "linkedRelationshipId" : "117",
                  "sourceId" : "146",
                  "technology" : "Kafka"
                }, {
                  "description" : "W: Размещение результата расчёта",
                  "destinationId" : "161",
                  "id" : "164",
                  "linkedRelationshipId" : "118",
                  "sourceId" : "146",
                  "technology" : "Kafka"
                } ],
                "tags" : "Container Instance"
              }, {
                "containerId" : "88",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Development",
                "id" : "150",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "7c2f4a4d-8b56-4a67-8c1e-9d1dfe36e531"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "89",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Development",
                "id" : "153",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "28cc2124-4f48-4f8f-b135-a321be2f6df3"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "90",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Development",
                "id" : "156",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "42ac9f3e-3618-4122-8428-297fdfb5401b"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "91",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Development",
                "id" : "159",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "e9c15ea7-a5a6-46da-ad87-ea626160c3d2"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "92",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Development",
                "id" : "161",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "39112de7-ac81-40d7-966e-ed5c7c15408f"
                },
                "tags" : "Container Instance"
              } ],
              "environment" : "Development",
              "id" : "44",
              "instances" : "1",
              "name" : "optistair-calc",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40.d85da6cb-0620-4e1c-9bd0-1c9b5e31406c"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "k8s namespace"
            } ],
            "environment" : "Development",
            "id" : "39",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Development",
              "id" : "40",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40.7a2ee73f-5a4b-40b7-931f-d53d1f670997"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "dev",
            "properties" : {
              "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1.27439fc4-7fd7-4525-9a7e-ccfb17916f40"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          } ],
          "environment" : "Development",
          "id" : "32",
          "instances" : "1",
          "name" : "Кластер kalkpro-k8s",
          "properties" : {
            "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00.28b7d016-10a4-4b72-ab35-e4fc8c9673c1"
          },
          "tags" : "Element,Deployment Node",
          "technology" : "kubernetes"
        } ],
        "description" : "Кластер для расчета оптимальных конфигураций лестниц. URL https://optistair(-dev).kalk.rpo",
        "environment" : "Development",
        "id" : "31",
        "instances" : "1",
        "name" : "kalkpro_project",
        "properties" : {
          "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1.e1224a06-4af2-47ac-871a-de6f0b98bc00"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPC"
      } ],
      "environment" : "Development",
      "id" : "30",
      "instances" : "1",
      "name" : "CloRu",
      "properties" : {
        "structurizr.dsl.identifier" : "56571706-b811-4737-bdf6-1f94247e0d0c.9e155690-cea4-4756-ba41-c7f9a9b573c1"
      },
      "tags" : "Element,Deployment Node"
    }, {
      "children" : [ {
        "description" : "Веб-сайт основного онлайн-сервиса (IP: 91.107.126.103)",
        "environment" : "Stage",
        "id" : "46",
        "instances" : "1",
        "name" : "WEB-SERVER",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071.1f073414-d0b0-429c-b077-b7e6a9177fdc"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Хранилище статических файлов (IP: 62.109.15.25)",
        "environment" : "Stage",
        "id" : "47",
        "instances" : "1",
        "name" : "STATIC-STORAGE",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071.ec3b9584-cd7d-43d4-b98e-2dc8b92c4e17"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов PROD (IP: 212.109.221.247)",
        "environment" : "Stage",
        "id" : "48",
        "instances" : "1",
        "name" : "NODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071.4d6613fc-9e09-435d-ac74-517f9c3c7fdd"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов DEV/STAGE (IP: 188.120.254.218)",
        "environment" : "Stage",
        "id" : "49",
        "instances" : "1",
        "name" : "NODE-2",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071.4b9b6a42-af2a-4eb6-b71d-0f72042b75c6"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер простых расчетов DEV/STAGE/PROD (IP: 83.220.170.100)",
        "environment" : "Stage",
        "id" : "50",
        "instances" : "1",
        "name" : "SINODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071.85db0b71-c4c4-438d-9fd0-65313bf3972a"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      } ],
      "environment" : "Stage",
      "id" : "45",
      "instances" : "1",
      "name" : "FirstVDS",
      "properties" : {
        "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.3cc38234-dff2-4337-9848-b4c6a3897071"
      },
      "tags" : "Element,Deployment Node"
    }, {
      "children" : [ {
        "children" : [ {
          "children" : [ {
            "children" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Stage",
              "id" : "56",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.1d140b0c-5318-4268-a3cd-c0b507614a23.4a3f3e7b-de87-4cd1-a44d-a410cf5792e6"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "environment" : "Stage",
              "id" : "57",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.1d140b0c-5318-4268-a3cd-c0b507614a23.3831a78a-87e3-4e90-9418-d6e319f7b78b"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "PostgreSQL operator"
            }, {
              "description" : "3х. UI https://kafka-ui.infrastructure.kalk.pro.",
              "environment" : "Stage",
              "id" : "58",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.1d140b0c-5318-4268-a3cd-c0b507614a23.26b9cc55-5522-47b0-9e48-886b25ff990e"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            } ],
            "environment" : "Stage",
            "id" : "54",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Stage",
              "id" : "55",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.1d140b0c-5318-4268-a3cd-c0b507614a23.f7b2cde0-1375-4d0e-8071-1def2c6c1698"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "infrastructure",
            "properties" : {
              "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.1d140b0c-5318-4268-a3cd-c0b507614a23"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "environment" : "Stage",
            "id" : "59",
            "instances" : "1",
            "name" : "optistair-calc",
            "properties" : {
              "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.629f2162-47d9-4514-baff-ab5d57183bb9"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "children" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Stage",
              "id" : "62",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c.e6777528-9c7c-4131-8f64-5d514a8c01fd"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "environment" : "Stage",
              "id" : "63",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c.59d0c268-d389-49c9-a216-f7b0c705c72d"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "PostgreSQL operator"
            }, {
              "description" : "3х. UI https://kafka-ui.infrastructure-dev.kalk.pro.",
              "environment" : "Stage",
              "id" : "64",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c.4ee44aa3-24b3-4470-845d-cd0967bbb182"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            }, {
              "environment" : "Stage",
              "id" : "65",
              "instances" : "1",
              "name" : "optistair-calc",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c.7c3fdd1e-a387-49ad-b342-aa5876d158ef"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "k8s namespace"
            } ],
            "environment" : "Stage",
            "id" : "60",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Stage",
              "id" : "61",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c.f054cded-d3ee-4130-9c4c-27d9e9f54bfc"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "dev",
            "properties" : {
              "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e.e38d0bcd-ce7e-4f0a-b7e1-ab872155924c"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          } ],
          "environment" : "Stage",
          "id" : "53",
          "instances" : "1",
          "name" : "Кластер kalkpro-k8s",
          "properties" : {
            "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0.3b7ddb3f-c33f-4aed-bad4-19dc71b5692e"
          },
          "tags" : "Element,Deployment Node",
          "technology" : "kubernetes"
        } ],
        "description" : "Кластер для расчета оптимальных конфигураций лестниц. URL https://optistair(-dev).kalk.rpo",
        "environment" : "Stage",
        "id" : "52",
        "instances" : "1",
        "name" : "kalkpro_project",
        "properties" : {
          "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197.1dc0e93f-b642-4dc1-8fbb-44881cb5eee0"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPC"
      } ],
      "environment" : "Stage",
      "id" : "51",
      "instances" : "1",
      "name" : "CloRu",
      "properties" : {
        "structurizr.dsl.identifier" : "b5a19a42-4edc-42dd-8850-412cbb3dbebf.4487d161-2db8-4099-9252-c8a3bc1a4197"
      },
      "tags" : "Element,Deployment Node"
    }, {
      "children" : [ {
        "description" : "Веб-сайт основного онлайн-сервиса (IP: 91.107.126.103)",
        "environment" : "Production",
        "id" : "67",
        "instances" : "1",
        "name" : "WEB-SERVER",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac.9eb9da4c-70b0-4ebc-9b2f-0ca6e711dac3"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Хранилище статических файлов (IP: 62.109.15.25)",
        "environment" : "Production",
        "id" : "68",
        "instances" : "1",
        "name" : "STATIC-STORAGE",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac.e5b8aa17-2862-475c-a2a4-bd19b71a7b5d"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов PROD (IP: 212.109.221.247)",
        "environment" : "Production",
        "id" : "69",
        "instances" : "1",
        "name" : "NODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac.6ecdaab9-a043-4db1-949e-99600958e5a9"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер проектных расчетов DEV/STAGE (IP: 188.120.254.218)",
        "environment" : "Production",
        "id" : "70",
        "instances" : "1",
        "name" : "NODE-2",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac.381a6f06-adc6-4055-854c-e736aec25d4f"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      }, {
        "description" : "Сервер простых расчетов DEV/STAGE/PROD (IP: 83.220.170.100)",
        "environment" : "Production",
        "id" : "71",
        "instances" : "1",
        "name" : "SINODE-1",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac.7686f53e-c72c-4333-84bb-ad4fd8263b18"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPS KVM"
      } ],
      "environment" : "Production",
      "id" : "66",
      "instances" : "1",
      "name" : "FirstVDS",
      "properties" : {
        "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.8e4e7eba-2fa7-44bd-9527-595f091240ac"
      },
      "tags" : "Element,Deployment Node"
    }, {
      "children" : [ {
        "children" : [ {
          "children" : [ {
            "children" : [ {
              "containerInstances" : [ {
                "containerId" : "93",
                "deploymentGroups" : [ "Default" ],
                "description" : "K8s Ingress nginx\nreplicas: X2",
                "environment" : "Production",
                "id" : "166",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "aa7397e8-5440-474f-85dc-79f67f4d2dbe",
                  "replicas" : "2"
                },
                "relationships" : [ {
                  "description" : "Получить статус запроса на расчёт. GET (public): /api/requests-statuses",
                  "destinationId" : "173",
                  "id" : "174",
                  "linkedRelationshipId" : "119",
                  "sourceId" : "166",
                  "technology" : "REST API"
                }, {
                  "description" : "Подтвердить получение расчёта со стороны frontend. PATCH (public): /api/request-status/send",
                  "destinationId" : "173",
                  "id" : "175",
                  "linkedRelationshipId" : "120",
                  "sourceId" : "166",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт Прямой лестницы. POST (public): /api/straight-stair/request",
                  "destinationId" : "173",
                  "id" : "176",
                  "linkedRelationshipId" : "121",
                  "sourceId" : "166",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт Г-образной лестницы. POST (public): /api/l-shape-stair/request",
                  "destinationId" : "173",
                  "id" : "177",
                  "linkedRelationshipId" : "122",
                  "sourceId" : "166",
                  "technology" : "REST API"
                }, {
                  "description" : "Разместить запрос на расчёт П-образной лестницы. POST (public): /api/u-shape-stair/request",
                  "destinationId" : "173",
                  "id" : "178",
                  "linkedRelationshipId" : "123",
                  "sourceId" : "166",
                  "technology" : "REST API"
                }, {
                  "description" : "Установить ограничения пользователя. POST (public secured): /api/user-acl",
                  "destinationId" : "173",
                  "id" : "179",
                  "linkedRelationshipId" : "124",
                  "sourceId" : "166",
                  "technology" : "REST API"
                } ],
                "tags" : "Container Instance"
              } ],
              "description" : "Получение и обновление сертификатов",
              "environment" : "Production",
              "id" : "77",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.156f1f31-b4ea-475d-84da-e1abab6e7963.e1721fbf-6a11-4cb2-88c7-27939be670c9"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "containerInstances" : [ {
                "containerId" : "87",
                "deploymentGroups" : [ "Default" ],
                "description" : "db: optistairs\nreplicas: X2",
                "environment" : "Production",
                "id" : "167",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "c5c618ce-548d-4d77-aee0-a7e05734ac52",
                  "replicas" : "2"
                },
                "tags" : "Container Instance"
              } ],
              "environment" : "Production",
              "id" : "78",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.156f1f31-b4ea-475d-84da-e1abab6e7963.7e2c5e5f-c2d0-46e5-a488-d5527d210640"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "postgres 17 operator 500Mi"
            }, {
              "containerInstances" : [ {
                "containerId" : "88",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Production",
                "id" : "168",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "7a1ae4e8-4636-4261-a842-c3e8224499c9"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "89",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Production",
                "id" : "169",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "2844ad7e-e561-41a7-a639-83a4c0191a9d"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "90",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Production",
                "id" : "170",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "bcd326d5-a138-427c-a5fa-cc213775a15e"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "91",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Production",
                "id" : "171",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "8e55a73f-212a-4698-914f-c7fadeccc02f"
                },
                "tags" : "Container Instance"
              }, {
                "containerId" : "92",
                "deploymentGroups" : [ "Default" ],
                "environment" : "Production",
                "id" : "172",
                "instanceId" : 1,
                "properties" : {
                  "structurizr.dsl.identifier" : "730f913d-e423-4f63-b274-d96919b09a69"
                },
                "tags" : "Container Instance"
              } ],
              "description" : "3х. UI https://kafka-ui.infrastructure.kalk.pro.",
              "environment" : "Production",
              "id" : "79",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.156f1f31-b4ea-475d-84da-e1abab6e7963.b0c1d866-8a8a-468a-bfc6-fd6666b7ff1f"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            } ],
            "environment" : "Production",
            "id" : "75",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Production",
              "id" : "76",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.156f1f31-b4ea-475d-84da-e1abab6e7963.5c9c49e6-c2fd-4df4-890a-4da334a3206e"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "infrastructure",
            "properties" : {
              "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.156f1f31-b4ea-475d-84da-e1abab6e7963"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "containerInstances" : [ {
              "containerId" : "94",
              "deploymentGroups" : [ "Default" ],
              "description" : "replicas: X2",
              "environment" : "Production",
              "id" : "173",
              "instanceId" : 1,
              "properties" : {
                "structurizr.dsl.identifier" : "1d60ce20-9159-4a48-836c-e415331c01b3",
                "replicas" : "2"
              },
              "relationships" : [ {
                "description" : "R: Получение результатов расчёта",
                "destinationId" : "172",
                "id" : "180",
                "linkedRelationshipId" : "100",
                "sourceId" : "173",
                "technology" : "Kafka"
              }, {
                "description" : "Создание запросов на расчет. Получение статуса запроса. Запись и чтение результатов расчета.",
                "destinationId" : "167",
                "id" : "181",
                "linkedRelationshipId" : "95",
                "sourceId" : "173",
                "technology" : "pgsql"
              }, {
                "description" : "W: Размещение запроса на расчёт П-образной лестницы",
                "destinationId" : "170",
                "id" : "182",
                "linkedRelationshipId" : "98",
                "sourceId" : "173",
                "technology" : "Kafka"
              }, {
                "description" : "W: Размещение запроса на расчёт Г-образной лестницы",
                "destinationId" : "169",
                "id" : "183",
                "linkedRelationshipId" : "97",
                "sourceId" : "173",
                "technology" : "Kafka"
              }, {
                "description" : "R: Получение прогресса расчёта",
                "destinationId" : "171",
                "id" : "184",
                "linkedRelationshipId" : "99",
                "sourceId" : "173",
                "technology" : "Kafka"
              }, {
                "description" : "W: Размещение запроса на расчёт Прямой лестницы",
                "destinationId" : "168",
                "id" : "185",
                "linkedRelationshipId" : "96",
                "sourceId" : "173",
                "technology" : "Kafka"
              } ],
              "tags" : "Container Instance"
            }, {
              "containerId" : "101",
              "deploymentGroups" : [ "Default" ],
              "description" : "replicas: X2",
              "environment" : "Production",
              "id" : "186",
              "instanceId" : 1,
              "properties" : {
                "structurizr.dsl.identifier" : "88a556d0-3f98-430c-97b8-0324082e47e7",
                "replicas" : "2"
              },
              "relationships" : [ {
                "description" : "W: Размещение результата расчёта",
                "destinationId" : "172",
                "id" : "187",
                "linkedRelationshipId" : "106",
                "sourceId" : "186",
                "technology" : "Kafka"
              }, {
                "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /straight-stair/actual-requests",
                "destinationId" : "173",
                "id" : "188",
                "linkedRelationshipId" : "102",
                "sourceId" : "186",
                "technology" : "REST API"
              }, {
                "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                "destinationId" : "173",
                "id" : "189",
                "linkedRelationshipId" : "103",
                "sourceId" : "186",
                "technology" : "REST API"
              }, {
                "description" : "Передать результат расчёта. POST: /save-result",
                "destinationId" : "173",
                "id" : "190",
                "linkedRelationshipId" : "104",
                "sourceId" : "186",
                "technology" : "REST API"
              }, {
                "description" : "R: Получение запроса на расчёт Прямой лестницы",
                "destinationId" : "168",
                "id" : "191",
                "linkedRelationshipId" : "105",
                "sourceId" : "186",
                "technology" : "Kafka"
              } ],
              "tags" : "Container Instance"
            }, {
              "containerId" : "107",
              "deploymentGroups" : [ "Default" ],
              "description" : "replicas: X2",
              "environment" : "Production",
              "id" : "192",
              "instanceId" : 1,
              "properties" : {
                "structurizr.dsl.identifier" : "610df129-24c5-4973-bcba-a868952ce9b7",
                "replicas" : "2"
              },
              "relationships" : [ {
                "description" : "W: Размещение результата расчёта",
                "destinationId" : "172",
                "id" : "193",
                "linkedRelationshipId" : "112",
                "sourceId" : "192",
                "technology" : "Kafka"
              }, {
                "description" : "R: Получение запроса на расчёт Г-образной лестницы",
                "destinationId" : "169",
                "id" : "194",
                "linkedRelationshipId" : "111",
                "sourceId" : "192",
                "technology" : "Kafka"
              }, {
                "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /l-shape-stair/actual-requests",
                "destinationId" : "173",
                "id" : "195",
                "linkedRelationshipId" : "108",
                "sourceId" : "192",
                "technology" : "REST API"
              }, {
                "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                "destinationId" : "173",
                "id" : "196",
                "linkedRelationshipId" : "109",
                "sourceId" : "192",
                "technology" : "REST API"
              }, {
                "description" : "Передать результат расчёта. POST: /save-result",
                "destinationId" : "173",
                "id" : "197",
                "linkedRelationshipId" : "110",
                "sourceId" : "192",
                "technology" : "REST API"
              } ],
              "tags" : "Container Instance"
            }, {
              "containerId" : "113",
              "deploymentGroups" : [ "Default" ],
              "description" : "replicas: X2",
              "environment" : "Production",
              "id" : "198",
              "instanceId" : 1,
              "properties" : {
                "structurizr.dsl.identifier" : "077a7164-2784-4150-a57b-53f002ddb5a8",
                "replicas" : "2"
              },
              "relationships" : [ {
                "description" : "W: Размещение результата расчёта",
                "destinationId" : "172",
                "id" : "199",
                "linkedRelationshipId" : "118",
                "sourceId" : "198",
                "technology" : "Kafka"
              }, {
                "description" : "R: Получение запроса на расчёт П-образной лестницы",
                "destinationId" : "170",
                "id" : "200",
                "linkedRelationshipId" : "117",
                "sourceId" : "198",
                "technology" : "Kafka"
              }, {
                "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /u-shape-stair/actual-requests",
                "destinationId" : "173",
                "id" : "201",
                "linkedRelationshipId" : "114",
                "sourceId" : "198",
                "technology" : "REST API"
              }, {
                "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
                "destinationId" : "173",
                "id" : "202",
                "linkedRelationshipId" : "115",
                "sourceId" : "198",
                "technology" : "REST API"
              }, {
                "description" : "Передать результат расчёта. POST: /save-result",
                "destinationId" : "173",
                "id" : "203",
                "linkedRelationshipId" : "116",
                "sourceId" : "198",
                "technology" : "REST API"
              } ],
              "tags" : "Container Instance"
            } ],
            "environment" : "Production",
            "id" : "80",
            "instances" : "1",
            "name" : "optistair-calc",
            "properties" : {
              "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.d1c52ea7-1ade-4738-9d9f-5ab17b979acf"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          }, {
            "children" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Production",
              "id" : "83",
              "instances" : "1",
              "name" : "balancer",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354.c212bda2-af72-478d-9663-cf131eda5cb7"
              },
              "tags" : "Element,Deployment Node,tagDeploymentInfrastructure,l1",
              "technology" : "Ingregress Nginx"
            }, {
              "environment" : "Production",
              "id" : "84",
              "instances" : "1",
              "name" : "pgsql",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354.3314e500-58a7-473b-a41c-bde86587a2b3"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "PostgreSQL operator"
            }, {
              "description" : "3х. UI https://kafka-ui.infrastructure-dev.kalk.pro.",
              "environment" : "Production",
              "id" : "85",
              "instances" : "1",
              "name" : "kafka",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354.3aa77513-5a9c-48d5-a05c-b137d14f1582"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "Apache Kafka multi-tenant cluster"
            }, {
              "environment" : "Production",
              "id" : "86",
              "instances" : "1",
              "name" : "optistair-calc",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354.a27f75f0-a859-43ba-b12b-37c9d8fc06b4"
              },
              "tags" : "Element,Deployment Node",
              "technology" : "k8s namespace"
            } ],
            "environment" : "Production",
            "id" : "81",
            "infrastructureNodes" : [ {
              "description" : "Получение и обновление сертификатов",
              "environment" : "Production",
              "id" : "82",
              "name" : "Cert-Manager",
              "properties" : {
                "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354.09844e6c-97eb-462d-971a-b99604a5ddd8"
              },
              "tags" : "Element,Infrastructure Node,tagDeploymentInfrastructure,l1",
              "technology" : "Cert manager"
            } ],
            "instances" : "1",
            "name" : "dev",
            "properties" : {
              "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3.a9c2d9d2-f5f4-4d93-8fd7-1f5935404354"
            },
            "tags" : "Element,Deployment Node",
            "technology" : "k8s namespace"
          } ],
          "environment" : "Production",
          "id" : "74",
          "instances" : "1",
          "name" : "Кластер kalkpro-k8s",
          "properties" : {
            "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a.c56d7588-e7e6-413a-8abe-0f43e90f21c3"
          },
          "tags" : "Element,Deployment Node",
          "technology" : "kubernetes"
        } ],
        "description" : "Кластер для расчета оптимальных конфигураций лестниц. URL https://optistair(-dev).kalk.rpo",
        "environment" : "Production",
        "id" : "73",
        "instances" : "1",
        "name" : "kalkpro_project",
        "properties" : {
          "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e.778b6e2a-68b3-4791-b3b0-f27a7ab5465a"
        },
        "tags" : "Element,Deployment Node",
        "technology" : "VPC"
      } ],
      "environment" : "Production",
      "id" : "72",
      "instances" : "1",
      "name" : "CloRu",
      "properties" : {
        "structurizr.dsl.identifier" : "ea43b652-2b8c-4f39-ab32-9469664e1ebd.2b951b7d-e89e-4bfb-a701-c8a8dc8df24e"
      },
      "tags" : "Element,Deployment Node"
    } ],
    "people" : [ {
      "id" : "1",
      "location" : "Unspecified",
      "name" : "Пользователь (посетитель сайта)",
      "properties" : {
        "structurizr.dsl.identifier" : "ext_person_web"
      },
      "relationships" : [ {
        "description" : "Работа с веб-интерфейсом (расчеты, проекты)",
        "destinationId" : "5",
        "id" : "11",
        "sourceId" : "1",
        "tags" : "Relationship",
        "technology" : "HTTPS"
      } ],
      "tags" : "Element,Person,external"
    }, {
      "id" : "2",
      "location" : "Unspecified",
      "name" : "Администратор сайта",
      "properties" : {
        "structurizr.dsl.identifier" : "ext_person_admin"
      },
      "relationships" : [ {
        "description" : "Управление структруой и данными на сайте",
        "destinationId" : "5",
        "id" : "12",
        "sourceId" : "2",
        "tags" : "Relationship",
        "technology" : "HTTPS"
      } ],
      "tags" : "Element,Person,external"
    } ],
    "softwareSystems" : [ {
      "documentation" : { },
      "id" : "3",
      "location" : "Unspecified",
      "name" : "Yandex SMTP",
      "properties" : {
        "structurizr.dsl.identifier" : "ext_smpt"
      },
      "tags" : "Element,Software System,external"
    }, {
      "description" : "API Gateway",
      "documentation" : { },
      "id" : "4",
      "location" : "Unspecified",
      "name" : "API Gateway",
      "properties" : {
        "structurizr.dsl.identifier" : "system_api_gatewai"
      },
      "relationships" : [ {
        "description" : "Размещение запроса на расчёт. POST: /api/{stair-type}/request",
        "destinationId" : "9",
        "id" : "20",
        "sourceId" : "4",
        "tags" : "Relationship,L1,tagFrontReq",
        "technology" : "REST API"
      }, {
        "description" : "Получение статуса и результата расчёта. GET: /api/requests-statuses",
        "destinationId" : "9",
        "id" : "21",
        "sourceId" : "4",
        "tags" : "Relationship,L1,tagBackReq",
        "technology" : "REST API"
      }, {
        "description" : "Установить параметры доступа пользователя к расчётам. POST: /api/user-acl",
        "destinationId" : "9",
        "id" : "22",
        "sourceId" : "4",
        "tags" : "Relationship,L1,tagBackReq",
        "technology" : "REST API"
      }, {
        "description" : "Размещение запроса на расчёт. POST: /optis-stairs/api/{stair-type}/request",
        "destinationId" : "93",
        "id" : "125",
        "sourceId" : "4",
        "tags" : "Relationship",
        "technology" : "REST API"
      }, {
        "description" : "Получение статуса и результата расчёта. GET: /optis-stairs/api/requests-statuses",
        "destinationId" : "93",
        "id" : "126",
        "sourceId" : "4",
        "tags" : "Relationship",
        "technology" : "REST API"
      }, {
        "description" : "Установить параметры доступа пользователя к расчётам. POST: /optis-stairs/api/user-acl",
        "destinationId" : "93",
        "id" : "127",
        "sourceId" : "4",
        "tags" : "Relationship",
        "technology" : "REST API"
      } ],
      "tags" : "Element,Software System"
    }, {
      "description" : "KALK.PRO",
      "documentation" : { },
      "id" : "5",
      "location" : "Unspecified",
      "name" : "Онлайн-сервис автоматизации строительных расчетов",
      "properties" : {
        "structurizr.dsl.identifier" : "system_web_site"
      },
      "relationships" : [ {
        "description" : "Получение проекта с чертежами и 3D",
        "destinationId" : "6",
        "id" : "13",
        "sourceId" : "5",
        "tags" : "Relationship,L1",
        "technology" : "WEB-SOCKETS"
      }, {
        "description" : "Расчет типовых строительных расчетов",
        "destinationId" : "7",
        "id" : "14",
        "sourceId" : "5",
        "tags" : "Relationship,L1",
        "technology" : "WEB-SOCKETS"
      }, {
        "description" : "Расчет металлопроката",
        "destinationId" : "8",
        "id" : "15",
        "sourceId" : "5",
        "tags" : "Relationship,L1",
        "technology" : "iFrame"
      }, {
        "description" : "Размещение файлов статики",
        "destinationId" : "10",
        "id" : "16",
        "sourceId" : "5",
        "tags" : "Relationship,L1",
        "technology" : "HTTP"
      }, {
        "description" : "Размещение запроса на расчёт. POST: /optis-stairs/api/{stair-type}/request",
        "destinationId" : "4",
        "id" : "17",
        "sourceId" : "5",
        "tags" : "Relationship,L1,tagFrontReq",
        "technology" : "REST API"
      }, {
        "description" : "Получение статуса и результата расчёта. GET: /optis-stairs/api/requests-statuses",
        "destinationId" : "4",
        "id" : "18",
        "sourceId" : "5",
        "tags" : "Relationship,L1,tagBackReq",
        "technology" : "REST API"
      }, {
        "description" : "Установить параметры доступа пользователя к расчётам. POST: /optis-stairs/api/user-acl",
        "destinationId" : "4",
        "id" : "19",
        "sourceId" : "5",
        "tags" : "Relationship,L1,tagBackReq",
        "technology" : "REST API"
      }, {
        "description" : "Отправка e-mail уведомлений через внешний шлюз",
        "destinationId" : "3",
        "id" : "23",
        "sourceId" : "5",
        "tags" : "Relationship",
        "technology" : "SMTP"
      } ],
      "tags" : "Element,Software System"
    }, {
      "description" : "Расчет проектов (чертежи, 3D модель, характеристики конструкций)",
      "documentation" : { },
      "id" : "6",
      "location" : "Unspecified",
      "name" : "Кластер проектных расчетов",
      "properties" : {
        "structurizr.dsl.identifier" : "system_node_calc"
      },
      "tags" : "Element,Software System"
    }, {
      "description" : "Расчет типовых строительных конструкций",
      "documentation" : { },
      "id" : "7",
      "location" : "Unspecified",
      "name" : "Сервис простых расчетов",
      "properties" : {
        "structurizr.dsl.identifier" : "system_simple_calc"
      },
      "tags" : "Element,Software System"
    }, {
      "description" : "Расчет изделий из металлопроката. Справочник ГОСТов по металлопрокату.",
      "documentation" : { },
      "id" : "8",
      "location" : "Unspecified",
      "name" : "Сервис расчета металлопроката",
      "properties" : {
        "structurizr.dsl.identifier" : "system_metal_calc"
      },
      "tags" : "Element,Software System"
    }, {
      "containers" : [ {
        "description" : "База данных с рассчитанными конфигурациями",
        "documentation" : { },
        "id" : "87",
        "name" : "postgres-optistairs",
        "properties" : {
          "structurizr.dsl.identifier" : "db_optistairs"
        },
        "tags" : "Element,Container,storage",
        "technology" : "PostgreSQL"
      }, {
        "description" : "Запросы на расчет конфигураций Прямой лестницы",
        "documentation" : { },
        "id" : "88",
        "name" : "Топик request.straight_stair",
        "properties" : {
          "structurizr.dsl.identifier" : "topic_request_straight_stair"
        },
        "tags" : "Element,Container,queue,tagToBe",
        "technology" : "Kafka"
      }, {
        "description" : "Запросы на расчет конфигураций Г-образной лестницы",
        "documentation" : { },
        "id" : "89",
        "name" : "Топик request.l_shape_stair",
        "properties" : {
          "structurizr.dsl.identifier" : "topic_request_l_shape_stair"
        },
        "tags" : "Element,Container,queue,tagToBe",
        "technology" : "Kafka"
      }, {
        "description" : "Запросы на расчет конфигураций П-образной лестницы",
        "documentation" : { },
        "id" : "90",
        "name" : "Топик request.u_shape_stair",
        "properties" : {
          "structurizr.dsl.identifier" : "topic_request_u_shape_stair"
        },
        "tags" : "Element,Container,queue,tagToBe",
        "technology" : "Kafka"
      }, {
        "description" : "Прогресс калькуляцыы",
        "documentation" : { },
        "id" : "91",
        "name" : "Топик прогресс расчёта",
        "properties" : {
          "structurizr.dsl.identifier" : "topic_calculation_progress"
        },
        "tags" : "Element,Container,queue,tagToBe",
        "technology" : "Kafka"
      }, {
        "description" : "Результаты расчётов оптимальных конфигураций",
        "documentation" : { },
        "id" : "92",
        "name" : "Топик результат расчёта",
        "properties" : {
          "structurizr.dsl.identifier" : "topic_calculation_result"
        },
        "tags" : "Element,Container,queue,tagToBe",
        "technology" : "Kafka"
      }, {
        "documentation" : { },
        "id" : "93",
        "name" : "IngressNginx",
        "properties" : {
          "structurizr.dsl.identifier" : "app_balancer"
        },
        "relationships" : [ {
          "description" : "Получить статус запроса на расчёт. GET (public): /api/requests-statuses",
          "destinationId" : "94",
          "id" : "119",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Подтвердить получение расчёта со стороны frontend. PATCH (public): /api/request-status/send",
          "destinationId" : "94",
          "id" : "120",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Разместить запрос на расчёт Прямой лестницы. POST (public): /api/straight-stair/request",
          "destinationId" : "94",
          "id" : "121",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Разместить запрос на расчёт Г-образной лестницы. POST (public): /api/l-shape-stair/request",
          "destinationId" : "94",
          "id" : "122",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Разместить запрос на расчёт П-образной лестницы. POST (public): /api/u-shape-stair/request",
          "destinationId" : "94",
          "id" : "123",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Установить ограничения пользователя. POST (public secured): /api/user-acl",
          "destinationId" : "94",
          "id" : "124",
          "sourceId" : "93",
          "tags" : "Relationship",
          "technology" : "REST API"
        } ],
        "tags" : "Element,Container",
        "technology" : "Ingress nginx",
        "url" : "https://optistair.kalk.pro"
      }, {
        "documentation" : { },
        "id" : "94",
        "name" : "Менеджер обработки запросов",
        "properties" : {
          "structurizr.dsl.identifier" : "app_request_manager"
        },
        "relationships" : [ {
          "description" : "Создание запросов на расчет. Получение статуса запроса. Запись и чтение результатов расчета.",
          "destinationId" : "87",
          "id" : "95",
          "sourceId" : "94",
          "tags" : "Relationship,tagRead,tagWrite",
          "technology" : "pgsql"
        }, {
          "description" : "W: Размещение запроса на расчёт Прямой лестницы",
          "destinationId" : "88",
          "id" : "96",
          "sourceId" : "94",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "W: Размещение запроса на расчёт Г-образной лестницы",
          "destinationId" : "89",
          "id" : "97",
          "sourceId" : "94",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "W: Размещение запроса на расчёт П-образной лестницы",
          "destinationId" : "90",
          "id" : "98",
          "sourceId" : "94",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "R: Получение прогресса расчёта",
          "destinationId" : "91",
          "id" : "99",
          "sourceId" : "94",
          "tags" : "Relationship,queue,tagRead,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "R: Получение результатов расчёта",
          "destinationId" : "92",
          "id" : "100",
          "sourceId" : "94",
          "tags" : "Relationship,queue,tagRead,tagToBe",
          "technology" : "Kafka"
        } ],
        "tags" : "Element,Container",
        "technology" : "Python"
      }, {
        "description" : "Подбор оптимальной конфигурации Прямой лестницы по заданным параметрам проема",
        "documentation" : { },
        "id" : "101",
        "name" : "Калькулятор: Прямая лестница",
        "properties" : {
          "structurizr.dsl.identifier" : "app_straight_stair_calc"
        },
        "relationships" : [ {
          "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /straight-stair/actual-requests",
          "destinationId" : "94",
          "id" : "102",
          "sourceId" : "101",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
          "destinationId" : "94",
          "id" : "103",
          "sourceId" : "101",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Передать результат расчёта. POST: /save-result",
          "destinationId" : "94",
          "id" : "104",
          "sourceId" : "101",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "R: Получение запроса на расчёт Прямой лестницы",
          "destinationId" : "88",
          "id" : "105",
          "sourceId" : "101",
          "tags" : "Relationship,queue,tagRead,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "W: Размещение результата расчёта",
          "destinationId" : "92",
          "id" : "106",
          "sourceId" : "101",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        } ],
        "tags" : "Element,Container",
        "technology" : "Python"
      }, {
        "description" : "Подбор оптимальной конфигурации Г-образная лестницы по заданным параметрам проема",
        "documentation" : { },
        "id" : "107",
        "name" : "Калькулятор: Г-образная лестница",
        "properties" : {
          "structurizr.dsl.identifier" : "app_l_shape_stair_calc"
        },
        "relationships" : [ {
          "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /l-shape-stair/actual-requests",
          "destinationId" : "94",
          "id" : "108",
          "sourceId" : "107",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
          "destinationId" : "94",
          "id" : "109",
          "sourceId" : "107",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Передать результат расчёта. POST: /save-result",
          "destinationId" : "94",
          "id" : "110",
          "sourceId" : "107",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "R: Получение запроса на расчёт Г-образной лестницы",
          "destinationId" : "89",
          "id" : "111",
          "sourceId" : "107",
          "tags" : "Relationship,queue,tagRead,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "W: Размещение результата расчёта",
          "destinationId" : "92",
          "id" : "112",
          "sourceId" : "107",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        } ],
        "tags" : "Element,Container",
        "technology" : "Python"
      }, {
        "description" : "Подбор оптимальной конфигурации П-образная лестницы по заданным параметрам проема",
        "documentation" : { },
        "id" : "113",
        "name" : "Калькулятор: П-образная лестница",
        "properties" : {
          "structurizr.dsl.identifier" : "app_u_shape_stair_calc"
        },
        "relationships" : [ {
          "description" : "Получить список запросов на расчёт при первичной инициализации сервиса. GET: /u-shape-stair/actual-requests",
          "destinationId" : "94",
          "id" : "114",
          "sourceId" : "113",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Уведомить о прогрессе расчета и статусе. PATCH: /request-status",
          "destinationId" : "94",
          "id" : "115",
          "sourceId" : "113",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "Передать результат расчёта. POST: /save-result",
          "destinationId" : "94",
          "id" : "116",
          "sourceId" : "113",
          "tags" : "Relationship",
          "technology" : "REST API"
        }, {
          "description" : "R: Получение запроса на расчёт П-образной лестницы",
          "destinationId" : "90",
          "id" : "117",
          "sourceId" : "113",
          "tags" : "Relationship,queue,tagRead,tagToBe",
          "technology" : "Kafka"
        }, {
          "description" : "W: Размещение результата расчёта",
          "destinationId" : "92",
          "id" : "118",
          "sourceId" : "113",
          "tags" : "Relationship,queue,tagWrite,tagToBe",
          "technology" : "Kafka"
        } ],
        "tags" : "Element,Container",
        "technology" : "Python"
      } ],
      "description" : "Сервис подбора оптимальной конфигурации лестницы",
      "documentation" : {
        "decisions" : [ {
          "content" : "# ADR-0001 Технологический стек Frontend веб-приложения для ФС\n\nDate: 2025-02-22\n\n## Status\nAccepted\n\n### Критический сценарий\nПользователь легаси онлайн-сервиса Kalk.Pro выбирает и запускает на сайте проекта веб-приложение для подбора оптимальной конфигурации лестницы.\n\n### Критические характеристики:\n\"Мягкая\" интеграция веб-приложения с легаси архитектурой онлайн-сервиса Kalk.Pro.\n\n### Контекст\nВ рамках исполнения критического сценария требуется разработать и внедрить новое веб-приложение на действующий легаси сайт онлайн-сервиса Kalk.Pro, которое будет реализовывать основной пользовательский сценарий (UC) по взаимодействую пользователя с функциональными возможностями ФС Подбор оптимальной конфигурации лестницыы. При подборе технологического стека для разрабатываемого веб-приложения нужно учесть, что изменения в UI части сервиса Kalk.Pro должны быть минимальны. Минимальные изменения обеспечат сохранность существующего легаси кода, минимизируют или полностью предотвратят регресс-тестирование сценариев не связанных с UC разрабатываемого ФС. Что в свою очередь снизит стоимость внедрения и минимизирует риски повреждения уже существующего на сайте функционала.\n\n### Артефакты проектирования UI\n* [Основной интерфейс приложения (ввод размеров проема)](/design/ui-templates/opening-sizes-input.png)\n* [Настройка критериев удобства лестницы](/design/ui-templates/convenience-criteria-input.png)\n* [Вывод результатов подбора оптимальных конфигураций лестницы](/design/ui-templates/optimal-configurations-result.png)\n\n### Рассматриваемые варианты решения\n#### Использование backend-шаблонизатора легаси сайта + JS\nСайт онлайн-сервиса Kalk.Pro реализован на базе системы управления сайтом CMS - коробочное решение на PHP. CMS позволяет разрабатывать представления страниц сайта, отдельных компонентов UI сайта на основе PHTML-шаблонов. При запросе пользователем страниц сайта, соответствующий странице PHTML-шаблон динамически преобразуются в HTML-документ, к которому прикрепляются дополнительные ресурсы, в том числе JS-скрипты, обеспечивающие дополнительный функционал взаимодействия на стороне клиента. Для создания веб-приложения ФС Подбора оптимальных конфигураций лестницы, может быть использован подход с использованием PHTML-шаблонов и JS-скрипты для создания необходимого функционала и представления, заявленного в UC и Артефактах проектирования UI.\n##### Плюсы решения\n* Применяется нативная технология разработки UI, используемая на сайте Kalk.Pro, обеспечивающая полную совместимость с легаси кодом онлайн-сервиса.\n* Низкий порог вхождения для команды поддержки проекта.\n##### Минусы решения\n* Для создания UI в рамках основного UC, потребуется написание объемного кода на JS.\n* Добавление дополнительного кода в существующий набор PHTML-шаблонов потребует полного регресса в тестировании функционала сайта онлайн-сервиса Kalk.Pro, что ведет к удорожанию подхода.\n* В случае рефакторинга сайта или при создании дополнительного сайта-сателлита с функциональностью подбора оптимальной конфигурации лестницы, разработанный в рамках PHTML-шаблонов UI будет непереносим. Потребуется повторная разработка.\n* Специфический стек PHTML-шаблонов неизвестный широкому кругу разработчиков, усложняет поиск и подключение к проекту новых разработчиков.\n\n#### Фреймворк React\nПозволяет разрабатывать UI целиком или отдельные его части. Собирать итоговый HTML-файл с ресурсами в единый JS-build файл, который может быть подключен к сайту онлайн-сервиса Kalk.Pro в виде отдельного, независимого веб-приложения. UI на React может подгружаться и запускаться, только на определенных страницах сайт и при определенных условиях/событиях. Весь необходимый функционал и HTML представление UI части ФС Подбора оптимальных конфигураций лестницы представлен одним файлом на JS, который может быть подключен к сайту онлайн-сервиса как внешний ресурс.\n##### Плюсы решения\n* Подключение UI веб-приложения отдельным JS-build файлом на заданных страницах сайта.\n* CSS-стили UI могут быть инкапсулированы внутри веб-приложения.\n* Независимость и изоляция веб-приложения от основного сайта онлайн-сервиса.\n* Взаимодействие между веб-приложением и сайтом онлайн-сервиса через внешние события.\n* Отсутствие необходимости полного регресса функционала сайта онлайн-сервиса после подключения веб-приложения в силу изолированности кодовой базы сайта и веб-приложения. Как следствие - экономия времени и ресурсов на тестировании.\n* Быстрая разработка UX любой сложности для UI средствами фреймворка React.\n* Защита кода от копирования встроенными средствами React.\n* Быстрое подключение к разработке новых разработчиков в силу большого сообщества разработчиков React. Разработка на React - \"промышленный стандарт\".\n* Ранее реализованные веб-приложения для сайта онлайн-сервиса Kalk.Pro были разработаны на базе React, сайт уже содержит событийный интерфейс взаимодействия с такими веб-приложениями.\n##### Минусы решения\n* Более высокий порог включения для специалистов технического сопровождения проекта.\n\n#### Фреймворк Vue\nАналогично React (в контексте аспектов принятия решения для ФС Подбора оптимальных конфигураций лестницы).\n##### Плюсы решения\n* Аналогично React (в контексте аспектов принятия решения для ФС Подбора оптимальных конфигураций лестницы).\n##### Минусы решения\n* Ранее на сайте онлайн-сервиса не внедрялись веб-приложения написанные на Vue.\n* Приложение на Vue увеличит \"зоопарк\" стеков, которые нужно будет сопровождать в рамках проекта онлайн-сервиса.\n\n### Принятое решение\nИспользовать фреймворк React для создания веб-приложения и его последующей интеграции в существующий интерфейс сайта онлайн-сервиса Kalk.Pro в качестве отдельного, независимого модуля, осуществляющего двусторонний обмен с вычислительным сервером.\n\n### Последствия\n* Изолированность веб-приложения, оно будет работать как независимый модуль, что минимизирует риск повреждения существующего функционала легаси системы.\n* Модульная архитектура React позволяет создавать компоненты с инкапсулированными стилями и логикой, что упрощает поддержку и масштабирование приложения.\n* В силу наличия большого количества готовых библиотек и компонентов, а также опыту команды (учитывая предыдущее использование React), процесс разработки станет более эффективным.\n* Переносимость веб-приложения, которое может быть легко перенесено на другие сайты или интегрировано в будущие проекты без значительных изменений.\n\n### Риски\n* Дополнительная нагрузка от React-компонента может негативно повлиять на скорость загрузки страницы, особенно если сайт уже содержит другие React-компоненты.\n* Добавление еще одного React-компонента к существующим увеличивает сложность общей архитектуры Frontend.\n* Изоляция компонента усложняет диагностику проблем, возникающих на границе между React-частью и легаси-кодом.\n* Недоступность приложения, если пользователь отключает JavaScript в браузере.\n\n### Митигация рисков\n* Провести детальное тестирование производительности после интеграции.\n* Создать подробную документацию по работе и поддержке веб-приложения на React.\n* Обеспечить обучение всех членов команды технического сопровождения проекта базовым принципам работы с React.\n* Внедрить автоматизированные тесты для проверки совместимости нового компонента со старым кодом.\n",
          "date" : "2025-02-22T00:00:00Z",
          "format" : "Markdown",
          "id" : "1",
          "status" : "Accepted",
          "title" : " ADR-0001 Технологический стек Frontend веб-приложения для ФС"
        }, {
          "content" : "# ADR-0002 Выбор инфраструктуры для разработки новых приложений при рефакторинге ФС Кластера проектных расчетов\n\nDate: 2025-02-22\n\n## Status\nAccepted\n\n## Критический сценарий\nРазработка и развертывание новых микросервисов, составляющих функциональный сервис (ФС), должны быть выполнены с использованием современной инфраструктуры, обеспечивающей масштабируемость, отказоустойчивость и автоматизацию процессов.\n\n## Критические характеристики:\n* **Масштабируемость**: Возможность горизонтального масштабирования для обработки увеличивающихся нагрузок.\n* **Автоматизация**: Автоматическое управление жизненным циклом приложений (развертывание, мониторинг, обновления).\n* **Отказоустойчивость**: Обеспечение высокой доступности приложений даже при сбоях узлов или контейнеров.\n* **Единая среда**: Использование единой инфраструктуры для всех новых приложений ФС для стандартизации процессов разработки и эксплуатации.\n\n## Контекст\nКомпания Kalk.Pro планирует активно развивать функциональные сервисы и в последствии провести рефакторинг легаси сервисов с преходом на микро-сервисную архитектуру. Для этих целей требуется надежная и гибкая инфраструктура, которая позволит быстро разворачивать новые приложения, эффективно управлять их жизненным циклом и обеспечивать высокую производительность.<br>\nВ настоящее время используется смешанная инфраструктура на базе физических серверов и виртуальных машин (VM), что создает сложности в масштабировании, автоматизации и управлении ресурсами. Переход на современные технологии контейнеризации и оркестрации необходим для повышения эффективности разработки и эксплуатации.\n\n### Рассматриваемые варианты решения\n#### Использование Docker без оркестратора\n##### Плюсы решения\n* Простота внедрения контейнеризации.\n* Низкий порог входа для команды, знакомой с Docker.\n##### Минусы решения\n* Отсутствие автоматизации управления контейнерами (масштабирование, балансировка нагрузки, самовосстановление).\n* Необходимость ручного управления инфраструктурой.\n* Сложности с обеспечением высокой доступности и отказоустойчивости.\n\n#### Использование Kubernetes\n##### Плюсы решения\n* Масштабируемость: Возможность автоматического масштабирования приложений в зависимости от нагрузки.\n* Автоматизация: Полная автоматизация развертывания, мониторинга, обновлений и восстановления приложений.\n* Отказоустойчивость: Самовосстановление контейнеров и балансировка нагрузки между узлами.\n* Единая платформа: Поддержка множества языков программирования и технологий, что позволяет использовать одинаковый подход для всех новых приложений.\n* Большое сообщество и экосистема: Широкий выбор инструментов и готовых решений для интеграции.\n##### Минусы решения\n* Высокий порог входа: Требуется обучение команды для работы с Kubernetes.\n* Сложность настройки: Необходимость initial-конфигурации кластера и его компонентов.\n* Увеличение сложности архитектуры: Kubernetes добавляет дополнительный уровень абстракции, который может усложнить понимание системы для новичков.\n\n#### Использование облачных сервисов (например, AWS ECS, Azure AKS, Google GKE)\n##### Плюсы решения\n* Управляемая инфраструктура: Облачные провайдеры предоставляют готовые решения для оркестрации контейнеров.\n* Быстрое внедрение: Минимум усилий для настройки и запуска.\n* Интеграция с другими облачными сервисами.\n##### Минусы решения\n* Зависимость от конкретного провайдера: Переход на другую платформу может быть сложным и затратным.\n* Ограниченная гибкость: Некоторые функции могут быть недоступны или ограничены из-за особенностей облачного сервиса.\n* Стоимость: Платные услуги могут увеличить общие расходы на инфраструктуру.\n\n### Принятое решение\nВыбран Kubernetes в качестве основной инфраструктуры для разработки и развертывания новых приложений и функциональных сервисов.\n\n### Обоснование решения\nKubernetes предлагает наиболее полный набор функций для удовлетворения требований к масштабируемости, автоматизации и отказоустойчивости. Он предоставляет гибкую и открытую платформу, которая позволяет использовать лучшие практики DevOps и CI/CD. Кроме того, использование Kubernetes дает следующие преимущества:\n* **Стандартизация**: Все новые приложения будут разворачиваться в единой инфраструктуре, что упрощает процессы разработки и эксплуатации.\n* **Гибкость**: Возможность развертывать кластеры Kubernetes как в облаке, так и локально, что позволяет избежать привязки к конкретному провайдеру.\n* **Широкая экосистема**: Большая база готовых инструментов и плагинов для мониторинга, безопасности, сетевого взаимодействия и других задач.\n* **Поддержка сообщества**: Активное сообщество пользователей и разработчиков Kubernetes обеспечивает постоянное развитие и совершенствование платформы.\n\n### Риски\n* **Высокий порог входа**: Команде потребуется обучение для работы с Kubernetes.\n    * _Митигация_: Организовать обучение и сертификацию сотрудников, а также нанять специалистов с опытом работы с Kubernetes.\n* **Сложность первоначальной настройки**: Настройка кластера Kubernetes может занять значительное время.\n    * _Митигация_: Использовать готовые решения для быстрой настройки (например, kubeadm, Rancher) или обратиться к профессиональным услугам по внедрению Kubernetes.\n* **Увеличение сложности архитектуры**: Kubernetes добавляет новый уровень абстракции, что может усложнить понимание системы.\n    * _Митигация_: Создать подробную документацию и провести обучение для всей команды.\n\n### Митигация рисков\n* Разработать план обучения для команды разработчиков технического сопровождения проекта.\n* Создать детальную документацию по настройке и эксплуатации Kubernetes-кластера.\n* Внедрить автоматизированные тесты для проверки работоспособности новых приложений в Kubernetes-среде.\n* Рассмотреть использование готовых инфраструктурных решений на базе Kubernetes, например ДЦ Selectel или CLO.\n\n\n[> На главную страницу](README.md)",
          "date" : "2025-02-22T00:00:00Z",
          "format" : "Markdown",
          "id" : "2",
          "status" : "Accepted",
          "title" : " ADR-0002 Выбор инфраструктуры для разработки новых приложений при рефакторинге ФС Кластера проектных расчетов"
        }, {
          "content" : "# ADR-0003 Технологический стек Backend веб-приложения для ФС\n\nDate: 2025-02-22\n\n## Status\nCanceled\n\n## Критический сценарий:\n* С помощью веб-приложения подбора оптимальной конфигурации лестницы, пользователь получает набор оптимальных конфигураций лестницы в режиме онлайн. На время ожидания подбора пользователь видит прогресс выполнения процесса подбора конфигураций.\n\n## Критические характеристики:\n* Время подбора оптимальных конфигураций лестниц для одного проема не более 1 минуты.\n\n### Контекст\nДля реализации функционала подбора оптимальных конфигураций лестницы требуется разработать backend-приложение, способное выполнять подбор подходящих вариантов лестниц любой возможной конфигурации за промежуток времени не более 1 минуты. Архитектура приложения должна:\n* Учитывать ограничение ко времени подбора конфигураций лестниц;\n* Легко масштабироваться;\n* Отвечать архитектурному стилю REST API;\n* CORS для предоставления API разным доменам проекта Kalk.Pro;\n* Поддерживать совместимость с легаси наследием проекта Kalk.Pro;\n* Учитывать планы на рефакторинг ФС Кластера проектных расчетов.\n\n### Артефакты системной архитектуры\n![Контекст программных систем ландшафта онлайн-сервиса Kalk.Pro](/docs/c4/models/structurizr-1-systemLandscape.svg)\n![L1: Контекст программных систем ФС Кластер проектных расчетов](/docs/c4/models/node-calc/structurizr-1-NODE_CALC_C4L1.svg)\n![L2: Контейнеры ФС Кластер проектных расчетов](/docs/c4/models/node-calc/structurizr-1-NODE_CALC_C4L2.svg)\n![Схема развертывания Development ФС Кластер проектных расчетов](/docs/c4/models/node-calc/structurizr-1-NODE_CALC_DEPLOY_DEV.svg)\n![Схема развертывания Production ФС Кластер проектных расчетов](/docs/c4/models/node-calc/structurizr-1-NODE_CALC_DEPLOY_PROD.svg)\n\n### Рассматриваемые варианты решения\n#### Backend-приложение как новый сервис в ФС Кластера проектных расчётов\nДанный подход позволяет использовать инфраструктуру ФС Кластера проектных расчетов для разработки приложения в виде дополнительного сервиса. В качестве транспорта взаимодействия между frontend и backend будет использоваться Web-Socket AsyncApi. Данный транспорт уже используется на сайте онлайн-сервиса, что позволяет произвести простую интеграцию с существующим легаси кодом проекта.\n##### Плюсы решения\n* Быстрая разработка приложения за счет использования существующей инфраструктуры ФС Кластера проектных расчетов;\n* Полная совместимость с легаси \"наследием\" проекта Kalk.Pro;\n* Возможность масштабирования вычислительной мощности приложения за счет запуска дополнительных инстансов приложения, в том числе на дополнительных серверах;\n* CORS за счет использования Web-Socket для работы frontend с серверным приложением.\n##### Минусы решения\n* Ограничение на выбор языка разработки стеком ФС Кластера проектных расчетов - NodeJS;\n* Отсутствие штатного качественного мониторинга приложения и управление его состоянием;\n* Отсутствие возможности автоматического масштабирования приложения в зависимости от нагрузки и заданных НФТ. Подобный функционал потребует разработки дополнительного ответственного сервиса в контексте ФС Кластера проектных расчетов;\n* Неформализованный AsyncApi продиктованный легаси \"наследием\" проекта.\n\n#### Backend-приложение в Kubernetes\nДанный подход позволяет использовать множество инфраструктурных компонентов Kubernetes для автоматического масштабирования приложения, отслеживания его состояния, отправки уведомлений и логирования состояния. Серверное приложение в виде микросервиса. Обмен между frontend веб-приложением и backend - REST API для инициирования подбора оптимальных конфигурации лестниц. SSE для уведомления frontend веб-приложения о состоянии подбора (\"в очереди\", \"прогресс выполнения\", \"результат\").\n##### Плюсы решения\n* Нет ограничений на выбор языка для разработки приложения;\n* Возможность автоматического масштабирования приложения под нагрузкой;\n* Возможность использование инфраструктурных систем мониторинга, алертинга и логирования (Prometheus, Grafana, Kibana);\n* Возможность использование формализованной REST API архитектуры.\n* Создание инфраструктуры в Kubernetes для будущего рефакторинга ФС Кластера проектных расчетов: разделение сервисов на \"настоящие\" микросервисы.\n##### Минусы решения\n* Значительное увеличение времени разработки приложения в сравнении с вариантом разработки нового сервиса в ФС Кластера проектных расчетов.\n* Дополнительные затраты на создание и поддержку инфраструктуры в Kubernetes;\n* Затраты на обучение сотрудников технического сопровождения проекта для работы с инфраструктурой Kubernetes.\n\n#### Комбинированный вариант (backend-приложение в Kubernetes с \"проксированием\" запроса через сервис в Кластере проектных расчетов)\nВариант архитектуры, когда за взаимодействие frontend-приложения с backend-приложением будет отвечать сервис в контексте ФС Кластер проектных расчетов, который через Web-Socket реализует двухсторонний обмен о состоянии и результатах подбора оптимальных конфигураций. При этом само приложение подбора оптимальных конфигураций лестниц находится вне ФС Кластер проектных расчетов в инфраструктуре Kubernetes на отдельной ноде. С учётом будущего перевода всех сервисов ФС Кластер проектных расчетов на микро-сервисную архитектуру с формализованным REST API, backend-приложение подбора оптимальных конфигураций реализует REST API интерфейс, который транспонируется в AsyncAPI запросы в ФС Кластер проектных расчетов, тем самым реализуя совместимость с текущим легаси сервиса Kalk.Pro, и может быть отделено при рефакторинге и переходе на REST.\n\n##### Плюсы решения\n* Быстрая разработка приложения за счет использования существующей инфраструктуры ФС Кластера проектных расчетов;\n* Полная совместимость с легаси \"наследием\" проекта Kalk.Pro;\n* Возможность масштабирования вычислительной мощности приложения за счет запуска дополнительных инстансов приложения, в том числе на дополнительных серверах;\n* CORS за счет использования Web-Socket для работы frontend с серверным приложением.\n* Нет ограничений на выбор языка для разработки приложения подбора оптимальных конфигураций;\n* Возможность автоматического масштабирования приложения под нагрузкой;\n* Возможность использование инфраструктурных систем мониторинга, алертинга и логирования (Prometheus, Grafana, Kibana);\n* Возможность использование формализованной REST API архитектуры.\n* Создание инфраструктуры в Kubernetes для будущего рефакторинга ФС Кластера проектных расчетов: разделение сервисов на \"настоящие\" микросервисы.\n##### Минусы решения\n* Значительное увеличение времени на разработку, так как потребуется разработать не только приложение подбора оптимальных конфигураций, но и дополнительный сервис(ы) для проксирования и транспонирования REST запросов через Web-Socket в контексте ФС Кластера проектных расчетов.\n* Неформализованный AsyncApi продиктованный легаси \"наследием\" проекта.\n* Дополнительные затраты на создание и поддержку инфраструктуры в Kubernetes;\n* Дополнительные затраты на создание и поддержку новых сервисов в ФС Кластера проектных расчетов;\n* Затраты на обучение сотрудников технического сопровождения проекта для работы с инфраструктурой Kubernetes.\n* Увеличение количество точек отказа в силу наличия промежуточного слоя в виде сервисов для проксирования и транспонирования REST запросов через Web-Socket в контексте ФС Кластера проектных расчетов.\n* Усложнение архитектуры.\n\n### Принятое решение\nИспользовать комбинированный вариант серверного приложения подбора оптимальных конфигураций: backend-приложение в Kubernetes\n\n### Последствия\n* Совместимость с легаси архитектурой проекта Kalk.Pro\n* Использование инфраструктуры для будущего перехода на полностью микро-сервисную архитектуру.\n* Возможность автоматического масштабирования приложения для выполнения НФТ.\n* Широкий набор инструментов для контроля и наблюдаемости работы приложения средствами Kubernetes.\n\n### Риски\n* **Высокий порог входа**: Команде потребуется обучение для работы с Kubernetes\n* **Увеличение сложности архитектуры**: Kubernetes добавляет новый уровень абстракции. В комбинации с проксирующими сервисами в ФС Кластере проектных расчетов, приводит к сильному усложнению системы.\n* **Увеличение сроков разработки**. Потребуется разработка дополнительных сервисов в ФС Кластере проектных расчетов и самого приложения расчёта оптимальных конфигураций.\n* **Удорожание разработки**. Требуется привлечение большего количества разработчиков. Увеличение издержек на интеграционное тестирование и поддержку.\n\n### Митигация рисков\n* Разработать план обучения для команды разработчиков технического сопровождения проекта.\n* Создать детальную документацию по настройке и эксплуатации Kubernetes-кластера.\n* Для соблюдения сроков реализации привлечь к разработке две команды разработчиков, работающих параллельно: одна над частью проксирующих сервисов в ФС Кластера проектных расчетов, вторая над приложением подбора оптимальных конфигураций.\n\n# Спецификации OpenAPI и AsyncAPI backend-приложения\n* [Optistairs - Сервис подбора оптимальных конфигураций лестницы OpenAPI](openapi/optistairs-restapi.yaml)\n* [Router AsyncAPI](openapi/router-asyncapi.yaml)\n* [WebHookListener AsyncAPI](openapi/WebHookListener-asyncapi.yaml)\n* [WebHookListener OpenAPI](openapi/WebHookListener-restapi.yaml)\n\n\n[> На главную страницу](/README.md)",
          "date" : "2025-02-22T00:00:00Z",
          "format" : "Markdown",
          "id" : "3",
          "status" : "Canceled",
          "title" : " ADR-0003 Технологический стек Backend веб-приложения для ФС"
        }, {
          "content" : "# ADR-0004 Отмена \"комбинированного\" варианта backend-приложения подбора оптимальных конфигураций лестницы (отмена ADR-003)\n\nDate: 2025-03-04\n\n## Status\nAccepted\n\n## Критический сценарий:\n* С помощью веб-приложения подбора оптимальной конфигурации лестницы, пользователь получает набор оптимальных конфигураций лестницы в режиме онлайн. На время ожидания подбора пользователь видит прогресс выполнения процесса подбора конфигураций.\n\n## Критические характеристики:\n* Время подбора оптимальных конфигураций лестниц для одного проема не более 1 минуты.\n\n### Контекст\nПринятое решение в [ADR-003](/docs/adr/adr-003/README.md#adr-003-технологический-стек-backend-веб-приложения-для-фс) содержит ряд минусов:\n* Значительное увеличение времени на разработку, так как потребуется разработать не только приложение подбора оптимальных конфигураций, но и дополнительный сервис(ы) для проксирования и транспонирования REST запросов через Web-Socket в контексте ФС Кластера проектных расчетов.\n* Неформализованный AsyncApi продиктованный легаси \"наследием\" проекта.\n* Дополнительные затраты на создание и поддержку инфраструктуры в Kubernetes;\n* Дополнительные затраты на создание и поддержку новых сервисов в ФС Кластера проектных расчетов;\n* Затраты на обучение сотрудников технического сопровождения проекта для работы с инфраструктурой Kubernetes.\n* Увеличение количество точек отказа в силу наличия промежуточного слоя в виде сервисов для проксирования и транспонирования REST запросов через Web-Socket в контексте ФС Кластера проектных расчетов.\n* Усложнение архитектуры.\n\nРешение в ADR-003 было принято в пользу сохранения совместимости с легаси наследием проекта Kalk.Pro и поддержке двустороннего обмена между веб-приложением и backend-приложением через Web-Socket. Однако, такой подход увеличивает избыточность и сложность архитектурного решение. Приводит к увеличению стоимости проекта за счёт увеличения затрат на разработку и тестирование. Тестирование становится более сложное и непрозрачное, так как все клиентские REST API запросы должны проходить через проксирующие сервисы ФС Кластера проектных расчётов, которые тоже нужно разработать и протестировать.\n\n### Принятое решение\nОтменить ADR-003 в пользу ADR-004. Вместо альтернативных решений из ADR-003, в качестве основного варианта для реализации backend-приложения, был выбран подход создания такого приложения на базе сервиса в Kubernetes. Для взаимодействия веб-приложения на стороне frontend с backend-приложением выбран односторонний REST API с периодическим опросом состояния backend-приложения (через каждые 5 секунд) о состоянии запроса на выполнение расчёта оптимальных конфигураций лестниц по заданным параметрам проёма. Отложенное получение результата на 5 секунд, позволяет уложиться в нефункциональны требования - выполнения расчёта за 60 секунд. Основной \"точкой\" оптимизации является сам подбор конфигураций и возможное ускорение процесса за счёт много-поточности и авто-масштабирования POD-ов штатными средствами Kubernetes. Такой подход позволяет значительно уменьшить количество взаимодействующих систем, упростить архитектурное решение и сэкономить на стоимости решения.\n\n##### Плюсы решения\n* Нет ограничений на выбор языка для разработки приложения;\n* Возможность автоматического масштабирования приложения под нагрузкой;\n* Возможность использование инфраструктурных систем мониторинга, алертинга и логирования (Prometheus, Grafana, Kibana);\n* Возможность использование формализованной REST API архитектуры.\n* Создание инфраструктуры в Kubernetes для будущего рефакторинга ФС Кластера проектных расчетов: разделение сервисов на \"настоящие\" микросервисы.\n* Простота архитектуры за счёт использования односторонней связи.\n* Отсутствие связей с ФС Кластера проектных расчетов.\n\n##### Минусы решения\n* Дополнительные затраты на создание и поддержку инфраструктуры в Kubernetes;\n* Затраты на обучение сотрудников технического сопровождения проекта для работы с инфраструктурой Kubernetes.\n\n### Архитектурные артефакты\n- [Спецификация OpenAPI](/design/openapi/optistairs-restapi.yaml)\n- [Схема БД ФС Подбор оптимальной конфигурации лестницы](/design/diagrams/optistairs-db.puml)\n![Схема БД ФС Подбор оптимальной конфигурации лестницы (изображение)](../../../design/diagrams/optistairs-db.svg)\n- [ДП взаимодействия веб-приложения с backend-приложением, расчёт конфигураций](/design/diagrams/optistairs-calculation-sd.puml)\n![ДП взаимодействия веб-приложения с backend-приложением, расчёт конфигураций (изображение)](../../../design/diagrams/optistairs-calculation-sd.svg)\n- [ФС Подбор оптимальной конфигурации лестницы](/design/c4/optistair-calc/workspace.dsl)\n![ФС Подбор оптимальной конфигурации лестницы C4L1](/docs/c4/models/optistair-calc/structurizr-1-OPTISTAIR_CALC_C4L1.svg)\n![ФС Подбор оптимальной конфигурации лестницы C4L2](/docs/c4/models/optistair-calc/structurizr-1-OPTISTAIR_CALC_C4L2.svg)\n![ФС Подбор оптимальной конфигурации лестницы DEPLOY DEV](/docs/c4/models/optistair-calc/structurizr-1-OPTISTAIR_CALC_DEPLOY_DEV.svg)\n![ФС Подбор оптимальной конфигурации лестницы DEPLOY PROD](/docs/c4/models/optistair-calc/structurizr-1-OPTISTAIR_CALC_DEPLOY_PROD.svg)\n- [Ландшафт программных систем](/design/c4/workspace.dsl)\n![Ландшафт программных систем (изображение)](/docs/c4/models/structurizr-1-systemLandscape.svg)\n\n### Риски\n* **Высокий порог входа**: Команде потребуется обучение для работы с Kubernetes\n* **Увеличение сложности архитектуры**: Kubernetes добавляет новый уровень абстракции, что может усложнить понимание архитектуры.\n* **Несоблюдение НФТ**: возможный выход временного диапазона выделенного на расчёт оптимальных конфигураций, за счёт задержек между итерациями расчёта и опроса состояния запроса на расчёт в силу одностроннего обмена между веб-приложением и backend-приложением.\n\n### Митигация рисков\n* Разработать план обучения для команды разработчиков технического сопровождения проекта.\n* Создать детальную документацию по настройке и эксплуатации Kubernetes-кластера.\n* Подобрать параметры повторов для запуска расчётов на сервере. Увеличение количества инстансов калькуляторов.\n\n\n[> На главную страницу](/README.md)",
          "date" : "2025-03-04T00:00:00Z",
          "format" : "Markdown",
          "id" : "4",
          "status" : "Accepted",
          "title" : " ADR-0004 Отмена \"комбинированного\" варианта backend-приложения подбора оптимальных конфигураций лестницы (отмена ADR-003)"
        } ]
      },
      "id" : "9",
      "location" : "Unspecified",
      "name" : "Сервис подбора оптимальной конфигурации лестницы",
      "properties" : {
        "structurizr.dsl.identifier" : "system_optistair_calc"
      },
      "tags" : "Element,Software System"
    }, {
      "description" : "Сервис публикации файлов статики на защищенном сервере",
      "documentation" : { },
      "id" : "10",
      "location" : "Unspecified",
      "name" : "Сервис публикации файлов статики",
      "properties" : {
        "structurizr.dsl.identifier" : "system_static_storage"
      },
      "tags" : "Element,Software System"
    } ]
  },
  "name" : "system-landscape",
  "properties" : {
    "structurizr.dsl" : "d29ya3NwYWNlIGV4dGVuZHMgLi4vc3lzdGVtLWxhbmRzY2FwZS5kc2wgewogICAgbW9kZWwgewogICAgICAgICFyZWYgc3lzdGVtX29wdGlzdGFpcl9jYWxjIHsKICAgICAgICAgICAgIWFkcnMgYWRycwoKICAgICAgICAgICAgZGJfb3B0aXN0YWlycyA9IGNvbnRhaW5lciAicG9zdGdyZXMtb3B0aXN0YWlycyIgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCR0LDQt9CwINC00LDQvdC90YvRhSDRgSDRgNCw0YHRgdGH0LjRgtCw0L3QvdGL0LzQuCDQutC+0L3RhNC40LPRg9GA0LDRhtC40Y/QvNC4IgogICAgICAgICAgICAgICAgdGVjaG5vbG9neSAiUG9zdGdyZVNRTCIKICAgICAgICAgICAgICAgIHRhZ3Mgc3RvcmFnZQogICAgICAgICAgICB9CgogICAgICAgICAgICB0b3BpY19yZXF1ZXN0X3N0cmFpZ2h0X3N0YWlyID0gY29udGFpbmVyICLQotC+0L/QuNC6IHJlcXVlc3Quc3RyYWlnaHRfc3RhaXIiIHsKICAgICAgICAgICAgICAgIHRlY2hub2xvZ3kgIkthZmthIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCX0LDQv9GA0L7RgdGLINC90LAg0YDQsNGB0YfQtdGCINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuSDQn9GA0Y/QvNC+0Lkg0LvQtdGB0YLQvdC40YbRiyIKICAgICAgICAgICAgICAgIHRhZ3MgcXVldWUsdGFnVG9CZQogICAgICAgICAgICB9CgogICAgICAgICAgICB0b3BpY19yZXF1ZXN0X2xfc2hhcGVfc3RhaXIgPSBjb250YWluZXIgItCi0L7Qv9C40LogcmVxdWVzdC5sX3NoYXBlX3N0YWlyIiB7CiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5ICJLYWZrYSIKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uICLQl9Cw0L/RgNC+0YHRiyDQvdCwINGA0LDRgdGH0LXRgiDQutC+0L3RhNC40LPRg9GA0LDRhtC40Lkg0JMt0L7QsdGA0LDQt9C90L7QuSDQu9C10YHRgtC90LjRhtGLIgogICAgICAgICAgICAgICAgdGFncyBxdWV1ZSx0YWdUb0JlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRvcGljX3JlcXVlc3RfdV9zaGFwZV9zdGFpciA9IGNvbnRhaW5lciAi0KLQvtC/0LjQuiByZXF1ZXN0LnVfc2hhcGVfc3RhaXIiIHsKICAgICAgICAgICAgICAgIHRlY2hub2xvZ3kgIkthZmthIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCX0LDQv9GA0L7RgdGLINC90LAg0YDQsNGB0YfQtdGCINC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuSDQny3QvtCx0YDQsNC30L3QvtC5INC70LXRgdGC0L3QuNGG0YsiCiAgICAgICAgICAgICAgICB0YWdzIHF1ZXVlLHRhZ1RvQmUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdG9waWNfY2FsY3VsYXRpb25fcHJvZ3Jlc3MgPSBjb250YWluZXIgItCi0L7Qv9C40Log0L/RgNC+0LPRgNC10YHRgSDRgNCw0YHRh9GR0YLQsCIgewogICAgICAgICAgICAgICAgdGVjaG5vbG9neSAiS2Fma2EiCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiAi0J/RgNC+0LPRgNC10YHRgSDQutCw0LvRjNC60YPQu9GP0YbRi9GLIgogICAgICAgICAgICAgICAgdGFncyBxdWV1ZSx0YWdUb0JlCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRvcGljX2NhbGN1bGF0aW9uX3Jlc3VsdCA9IGNvbnRhaW5lciAi0KLQvtC/0LjQuiDRgNC10LfRg9C70YzRgtCw0YIg0YDQsNGB0YfRkdGC0LAiIHsKICAgICAgICAgICAgICAgIHRlY2hub2xvZ3kgIkthZmthIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCg0LXQt9GD0LvRjNGC0LDRgtGLINGA0LDRgdGH0ZHRgtC+0LIg0L7Qv9GC0LjQvNCw0LvRjNC90YvRhSDQutC+0L3RhNC40LPRg9GA0LDRhtC40LkiCiAgICAgICAgICAgICAgICB0YWdzIHF1ZXVlLHRhZ1RvQmUKICAgICAgICAgICAgfQoKICAgICAgICAgICAgYXBwX2JhbGFuY2VyID0gY29udGFpbmVyICJJbmdyZXNzTmdpbngiIHsKICAgICAgICAgICAgICAgIHVybCAiaHR0cHM6Ly9vcHRpc3RhaXIua2Fsay5wcm8iCiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5ICJJbmdyZXNzIG5naW54IgogICAgICAgICAgICB9CgogICAgICAgICAgICBhcHBfcmVxdWVzdF9tYW5hZ2VyID0gY29udGFpbmVyICLQnNC10L3QtdC00LbQtdGAINC+0LHRgNCw0LHQvtGC0LrQuCDQt9Cw0L/RgNC+0YHQvtCyIiB7CiAgICAgICAgICAgICAgICB0ZWNobm9sb2d5ICJQeXRob24iCiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiAiIgogICAgICAgICAgICAgICAgLT4gZGJfb3B0aXN0YWlycyAi0KHQvtC30LTQsNC90LjQtSDQt9Cw0L/RgNC+0YHQvtCyINC90LAg0YDQsNGB0YfQtdGCLiDQn9C+0LvRg9GH0LXQvdC40LUg0YHRgtCw0YLRg9GB0LAg0LfQsNC/0YDQvtGB0LAuINCX0LDQv9C40YHRjCDQuCDRh9GC0LXQvdC40LUg0YDQtdC30YPQu9GM0YLQsNGC0L7QsiDRgNCw0YHRh9C10YLQsC4iICJwZ3NxbCIgInRhZ1JlYWQsIHRhZ1dyaXRlIgoKICAgICAgICAgICAgICAgIC0+IHRvcGljX3JlcXVlc3Rfc3RyYWlnaHRfc3RhaXIgIlc6INCg0LDQt9C80LXRidC10L3QuNC1INC30LDQv9GA0L7RgdCwINC90LAg0YDQsNGB0YfRkdGCINCf0YDRj9C80L7QuSDQu9C10YHRgtC90LjRhtGLIiAiS2Fma2EiICJxdWV1ZSx0YWdXcml0ZSx0YWdUb0JlIgogICAgICAgICAgICAgICAgLT4gdG9waWNfcmVxdWVzdF9sX3NoYXBlX3N0YWlyICJXOiDQoNCw0LfQvNC10YnQtdC90LjQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGA0LDRgdGH0ZHRgiDQky3QvtCx0YDQsNC30L3QvtC5INC70LXRgdGC0L3QuNGG0YsiICJLYWZrYSIgInF1ZXVlLHRhZ1dyaXRlLHRhZ1RvQmUiCiAgICAgICAgICAgICAgICAtPiB0b3BpY19yZXF1ZXN0X3Vfc2hhcGVfc3RhaXIgIlc6INCg0LDQt9C80LXRidC10L3QuNC1INC30LDQv9GA0L7RgdCwINC90LAg0YDQsNGB0YfRkdGCINCfLdC+0LHRgNCw0LfQvdC+0Lkg0LvQtdGB0YLQvdC40YbRiyIgIkthZmthIiAicXVldWUsdGFnV3JpdGUsdGFnVG9CZSIKICAgICAgICAgICAgICAgIC0+IHRvcGljX2NhbGN1bGF0aW9uX3Byb2dyZXNzICJSOiDQn9C+0LvRg9GH0LXQvdC40LUg0L/RgNC+0LPRgNC10YHRgdCwINGA0LDRgdGH0ZHRgtCwIiAiS2Fma2EiICJxdWV1ZSx0YWdSZWFkLHRhZ1RvQmUiCiAgICAgICAgICAgICAgICAtPiB0b3BpY19jYWxjdWxhdGlvbl9yZXN1bHQgIlI6INCf0L7Qu9GD0YfQtdC90LjQtSDRgNC10LfRg9C70YzRgtCw0YLQvtCyINGA0LDRgdGH0ZHRgtCwIiAiS2Fma2EiICJxdWV1ZSx0YWdSZWFkLHRhZ1RvQmUiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcF9zdHJhaWdodF9zdGFpcl9jYWxjID0gY29udGFpbmVyICLQmtCw0LvRjNC60YPQu9GP0YLQvtGAOiDQn9GA0Y/QvNCw0Y8g0LvQtdGB0YLQvdC40YbQsCIgewogICAgICAgICAgICAgICAgdGVjaG5vbG9neSAiUHl0aG9uIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCf0L7QtNCx0L7RgCDQvtC/0YLQuNC80LDQu9GM0L3QvtC5INC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCDQn9GA0Y/QvNC+0Lkg0LvQtdGB0YLQvdC40YbRiyDQv9C+INC30LDQtNCw0L3QvdGL0Lwg0L/QsNGA0LDQvNC10YLRgNCw0Lwg0L/RgNC+0LXQvNCwIgogICAgICAgICAgICAgICAgLT4gYXBwX3JlcXVlc3RfbWFuYWdlciAi0J/QvtC70YPRh9C40YLRjCDRgdC/0LjRgdC+0Log0LfQsNC/0YDQvtGB0L7QsiDQvdCwINGA0LDRgdGH0ZHRgiDQv9GA0Lgg0L/QtdGA0LLQuNGH0L3QvtC5INC40L3QuNGG0LjQsNC70LjQt9Cw0YbQuNC4INGB0LXRgNCy0LjRgdCwLiBHRVQ6IC9zdHJhaWdodC1zdGFpci9hY3R1YWwtcmVxdWVzdHMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCj0LLQtdC00L7QvNC40YLRjCDQviDQv9GA0L7Qs9GA0LXRgdGB0LUg0YDQsNGB0YfQtdGC0LAg0Lgg0YHRgtCw0YLRg9GB0LUuIFBBVENIOiAvcmVxdWVzdC1zdGF0dXMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCf0LXRgNC10LTQsNGC0Ywg0YDQtdC30YPQu9GM0YLQsNGCINGA0LDRgdGH0ZHRgtCwLiBQT1NUOiAvc2F2ZS1yZXN1bHQiICJSRVNUIEFQSSIgIiIKCiAgICAgICAgICAgICAgICAtPiB0b3BpY19yZXF1ZXN0X3N0cmFpZ2h0X3N0YWlyICJSOiDQn9C+0LvRg9GH0LXQvdC40LUg0LfQsNC/0YDQvtGB0LAg0L3QsCDRgNCw0YHRh9GR0YIg0J/RgNGP0LzQvtC5INC70LXRgdGC0L3QuNGG0YsiICJLYWZrYSIgInF1ZXVlLHRhZ1JlYWQsdGFnVG9CZSIKICAgICAgICAgICAgICAgIC0+IHRvcGljX2NhbGN1bGF0aW9uX3Jlc3VsdCAiVzog0KDQsNC30LzQtdGJ0LXQvdC40LUg0YDQtdC30YPQu9GM0YLQsNGC0LAg0YDQsNGB0YfRkdGC0LAiICJLYWZrYSIgInF1ZXVlLHRhZ1dyaXRlLHRhZ1RvQmUiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcF9sX3NoYXBlX3N0YWlyX2NhbGMgPSBjb250YWluZXIgItCa0LDQu9GM0LrRg9C70Y/RgtC+0YA6INCTLdC+0LHRgNCw0LfQvdCw0Y8g0LvQtdGB0YLQvdC40YbQsCIgewogICAgICAgICAgICAgICAgdGVjaG5vbG9neSAiUHl0aG9uIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCf0L7QtNCx0L7RgCDQvtC/0YLQuNC80LDQu9GM0L3QvtC5INC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCDQky3QvtCx0YDQsNC30L3QsNGPINC70LXRgdGC0L3QuNGG0Ysg0L/QviDQt9Cw0LTQsNC90L3Ri9C8INC/0LDRgNCw0LzQtdGC0YDQsNC8INC/0YDQvtC10LzQsCIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCf0L7Qu9GD0YfQuNGC0Ywg0YHQv9C40YHQvtC6INC30LDQv9GA0L7RgdC+0LIg0L3QsCDRgNCw0YHRh9GR0YIg0L/RgNC4INC/0LXRgNCy0LjRh9C90L7QuSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDRgdC10YDQstC40YHQsC4gR0VUOiAvbC1zaGFwZS1zdGFpci9hY3R1YWwtcmVxdWVzdHMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCj0LLQtdC00L7QvNC40YLRjCDQviDQv9GA0L7Qs9GA0LXRgdGB0LUg0YDQsNGB0YfQtdGC0LAg0Lgg0YHRgtCw0YLRg9GB0LUuIFBBVENIOiAvcmVxdWVzdC1zdGF0dXMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCf0LXRgNC10LTQsNGC0Ywg0YDQtdC30YPQu9GM0YLQsNGCINGA0LDRgdGH0ZHRgtCwLiBQT1NUOiAvc2F2ZS1yZXN1bHQiICJSRVNUIEFQSSIgIiIKCiAgICAgICAgICAgICAgICAtPiB0b3BpY19yZXF1ZXN0X2xfc2hhcGVfc3RhaXIgIlI6INCf0L7Qu9GD0YfQtdC90LjQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGA0LDRgdGH0ZHRgiDQky3QvtCx0YDQsNC30L3QvtC5INC70LXRgdGC0L3QuNGG0YsiICJLYWZrYSIgInF1ZXVlLHRhZ1JlYWQsdGFnVG9CZSIKICAgICAgICAgICAgICAgIC0+IHRvcGljX2NhbGN1bGF0aW9uX3Jlc3VsdCAiVzog0KDQsNC30LzQtdGJ0LXQvdC40LUg0YDQtdC30YPQu9GM0YLQsNGC0LAg0YDQsNGB0YfRkdGC0LAiICJLYWZrYSIgInF1ZXVlLHRhZ1dyaXRlLHRhZ1RvQmUiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcF91X3NoYXBlX3N0YWlyX2NhbGMgPSBjb250YWluZXIgItCa0LDQu9GM0LrRg9C70Y/RgtC+0YA6INCfLdC+0LHRgNCw0LfQvdCw0Y8g0LvQtdGB0YLQvdC40YbQsCIgewogICAgICAgICAgICAgICAgdGVjaG5vbG9neSAiUHl0aG9uIgogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gItCf0L7QtNCx0L7RgCDQvtC/0YLQuNC80LDQu9GM0L3QvtC5INC60L7QvdGE0LjQs9GD0YDQsNGG0LjQuCDQny3QvtCx0YDQsNC30L3QsNGPINC70LXRgdGC0L3QuNGG0Ysg0L/QviDQt9Cw0LTQsNC90L3Ri9C8INC/0LDRgNCw0LzQtdGC0YDQsNC8INC/0YDQvtC10LzQsCIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCf0L7Qu9GD0YfQuNGC0Ywg0YHQv9C40YHQvtC6INC30LDQv9GA0L7RgdC+0LIg0L3QsCDRgNCw0YHRh9GR0YIg0L/RgNC4INC/0LXRgNCy0LjRh9C90L7QuSDQuNC90LjRhtC40LDQu9C40LfQsNGG0LjQuCDRgdC10YDQstC40YHQsC4gR0VUOiAvdS1zaGFwZS1zdGFpci9hY3R1YWwtcmVxdWVzdHMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCj0LLQtdC00L7QvNC40YLRjCDQviDQv9GA0L7Qs9GA0LXRgdGB0LUg0YDQsNGB0YfQtdGC0LAg0Lgg0YHRgtCw0YLRg9GB0LUuIFBBVENIOiAvcmVxdWVzdC1zdGF0dXMiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgICAgIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCf0LXRgNC10LTQsNGC0Ywg0YDQtdC30YPQu9GM0YLQsNGCINGA0LDRgdGH0ZHRgtCwLiBQT1NUOiAvc2F2ZS1yZXN1bHQiICJSRVNUIEFQSSIgIiIKCiAgICAgICAgICAgICAgICAtPiB0b3BpY19yZXF1ZXN0X3Vfc2hhcGVfc3RhaXIgIlI6INCf0L7Qu9GD0YfQtdC90LjQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGA0LDRgdGH0ZHRgiDQny3QvtCx0YDQsNC30L3QvtC5INC70LXRgdGC0L3QuNGG0YsiICJLYWZrYSIgInF1ZXVlLHRhZ1JlYWQsdGFnVG9CZSIKICAgICAgICAgICAgICAgIC0+IHRvcGljX2NhbGN1bGF0aW9uX3Jlc3VsdCAiVzog0KDQsNC30LzQtdGJ0LXQvdC40LUg0YDQtdC30YPQu9GM0YLQsNGC0LAg0YDQsNGB0YfRkdGC0LAiICJLYWZrYSIgInF1ZXVlLHRhZ1dyaXRlLHRhZ1RvQmUiCiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGFwcF9iYWxhbmNlciAtPiBhcHBfcmVxdWVzdF9tYW5hZ2VyICLQn9C+0LvRg9GH0LjRgtGMINGB0YLQsNGC0YPRgSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGA0LDRgdGH0ZHRgi4gR0VUIChwdWJsaWMpOiAvYXBpL3JlcXVlc3RzLXN0YXR1c2VzIiAiUkVTVCBBUEkiICIiCiAgICAgICAgICAgIGFwcF9iYWxhbmNlciAtPiBhcHBfcmVxdWVzdF9tYW5hZ2VyICLQn9C+0LTRgtCy0LXRgNC00LjRgtGMINC/0L7Qu9GD0YfQtdC90LjQtSDRgNCw0YHRh9GR0YLQsCDRgdC+INGB0YLQvtGA0L7QvdGLIGZyb250ZW5kLiBQQVRDSCAocHVibGljKTogL2FwaS9yZXF1ZXN0LXN0YXR1cy9zZW5kIiAiUkVTVCBBUEkiICIiCiAgICAgICAgICAgIGFwcF9iYWxhbmNlciAtPiBhcHBfcmVxdWVzdF9tYW5hZ2VyICLQoNCw0LfQvNC10YHRgtC40YLRjCDQt9Cw0L/RgNC+0YEg0L3QsCDRgNCw0YHRh9GR0YIg0J/RgNGP0LzQvtC5INC70LXRgdGC0L3QuNGG0YsuIFBPU1QgKHB1YmxpYyk6IC9hcGkvc3RyYWlnaHQtc3RhaXIvcmVxdWVzdCIgIlJFU1QgQVBJIiAiIgogICAgICAgICAgICBhcHBfYmFsYW5jZXIgLT4gYXBwX3JlcXVlc3RfbWFuYWdlciAi0KDQsNC30LzQtdGB0YLQuNGC0Ywg0LfQsNC/0YDQvtGBINC90LAg0YDQsNGB0YfRkdGCINCTLdC+0LHRgNCw0LfQvdC+0Lkg0LvQtdGB0YLQvdC40YbRiy4gUE9TVCAocHVibGljKTogL2FwaS9sLXNoYXBlLXN0YWlyL3JlcXVlc3QiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgYXBwX2JhbGFuY2VyIC0+IGFwcF9yZXF1ZXN0X21hbmFnZXIgItCg0LDQt9C80LXRgdGC0LjRgtGMINC30LDQv9GA0L7RgSDQvdCwINGA0LDRgdGH0ZHRgiDQny3QvtCx0YDQsNC30L3QvtC5INC70LXRgdGC0L3QuNGG0YsuIFBPU1QgKHB1YmxpYyk6IC9hcGkvdS1zaGFwZS1zdGFpci9yZXF1ZXN0IiAiUkVTVCBBUEkiICIiCiAgICAgICAgICAgIGFwcF9iYWxhbmNlciAtPiBhcHBfcmVxdWVzdF9tYW5hZ2VyICLQo9GB0YLQsNC90L7QstC40YLRjCDQvtCz0YDQsNC90LjRh9C10L3QuNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjy4gUE9TVCAocHVibGljIHNlY3VyZWQpOiAvYXBpL3VzZXItYWNsIiAiUkVTVCBBUEkiICIiCgogICAgICAgICAgICBzeXN0ZW1fYXBpX2dhdGV3YWkgLT4gYXBwX2JhbGFuY2VyICLQoNCw0LfQvNC10YnQtdC90LjQtSDQt9Cw0L/RgNC+0YHQsCDQvdCwINGA0LDRgdGH0ZHRgi4gUE9TVDogL29wdGlzLXN0YWlycy9hcGkve3N0YWlyLXR5cGV9L3JlcXVlc3QiICJSRVNUIEFQSSIgIiIKICAgICAgICAgICAgc3lzdGVtX2FwaV9nYXRld2FpIC0+IGFwcF9iYWxhbmNlciAi0J/QvtC70YPRh9C10L3QuNC1INGB0YLQsNGC0YPRgdCwINC4INGA0LXQt9GD0LvRjNGC0LDRgtCwINGA0LDRgdGH0ZHRgtCwLiBHRVQ6IC9vcHRpcy1zdGFpcnMvYXBpL3JlcXVlc3RzLXN0YXR1c2VzIiAiUkVTVCBBUEkiICIiCiAgICAgICAgICAgIHN5c3RlbV9hcGlfZ2F0ZXdhaSAtPiBhcHBfYmFsYW5jZXIgItCj0YHRgtCw0L3QvtCy0LjRgtGMINC/0LDRgNCw0LzQtdGC0YDRiyDQtNC+0YHRgtGD0L/QsCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0Log0YDQsNGB0YfRkdGC0LDQvC4gUE9TVDogL29wdGlzLXN0YWlycy9hcGkvdXNlci1hY2wiICJSRVNUIEFQSSIgIiIKICAgICAgICB9CgogICAgICAgIC8vIERldgogICAgICAgICFyZWYgIkRlcGxveW1lbnROb2RlOi8vRGV2ZWxvcG1lbnQvQ2xvUnUva2Fsa3Byb19wcm9qZWN0L9Ca0LvQsNGB0YLQtdGAIGthbGtwcm8tazhzL2Rldi9iYWxhbmNlciIgewogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSBhcHBfYmFsYW5jZXIgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gIks4cyBJbmdyZXNzIG5naW54XG5yZXBsaWNhczogWDEiCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHsKICAgICAgICAgICAgICAgICAgICAicmVwbGljYXMiICIxIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAhcmVmICJEZXBsb3ltZW50Tm9kZTovL0RldmVsb3BtZW50L0Nsb1J1L2thbGtwcm9fcHJvamVjdC/QmtC70LDRgdGC0LXRgCBrYWxrcHJvLWs4cy9kZXYvcGdzcWwiIHsKICAgICAgICAgICAgdGVjaG5vbG9neSAicG9zdGdyZXMgMTcgb3BlcmF0b3IgNTAwTWkiCiAgICAgICAgICAgIGNvbnRhaW5lckluc3RhbmNlIGRiX29wdGlzdGFpcnMgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gImRiOiBvcHRpc3RhaXJzXG5yZXBsaWNhczogWDEiCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHsKICAgICAgICAgICAgICAgICAgICAicmVwbGljYXMiICIxIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKCiAgICAgICAgIXJlZiAiRGVwbG95bWVudE5vZGU6Ly9EZXZlbG9wbWVudC9DbG9SdS9rYWxrcHJvX3Byb2plY3Qv0JrQu9Cw0YHRgtC10YAga2Fsa3Byby1rOHMvZGV2L29wdGlzdGFpci1jYWxjIiB7CiAgICAgICAgICAgIGNvbnRhaW5lckluc3RhbmNlIGFwcF9yZXF1ZXN0X21hbmFnZXIgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gInJlcGxpY2FzOiBYMSIKICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgewogICAgICAgICAgICAgICAgICAgICJyZXBsaWNhcyIgIjEiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgYXBwX3N0cmFpZ2h0X3N0YWlyX2NhbGMgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gInJlcGxpY2FzOiBYMSIKICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgewogICAgICAgICAgICAgICAgICAgICJyZXBsaWNhcyIgIjEiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgYXBwX2xfc2hhcGVfc3RhaXJfY2FsYyB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiAicmVwbGljYXM6IFgxIgogICAgICAgICAgICAgICAgcHJvcGVydGllcyB7CiAgICAgICAgICAgICAgICAgICAgInJlcGxpY2FzIiAiMSIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSBhcHBfdV9zaGFwZV9zdGFpcl9jYWxjIHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uICJyZXBsaWNhczogWDEiCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHsKICAgICAgICAgICAgICAgICAgICAicmVwbGljYXMiICIxIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSB0b3BpY19yZXF1ZXN0X3N0cmFpZ2h0X3N0YWlyCiAgICAgICAgICAgIGNvbnRhaW5lckluc3RhbmNlIHRvcGljX3JlcXVlc3RfbF9zaGFwZV9zdGFpcgogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSB0b3BpY19yZXF1ZXN0X3Vfc2hhcGVfc3RhaXIKICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgdG9waWNfY2FsY3VsYXRpb25fcHJvZ3Jlc3MKICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgdG9waWNfY2FsY3VsYXRpb25fcmVzdWx0CiAgICAgICAgfQoKICAgICAgICAvLyBQcm9kdWN0aW9uCiAgICAgICAgIXJlZiAiRGVwbG95bWVudE5vZGU6Ly9Qcm9kdWN0aW9uL0Nsb1J1L2thbGtwcm9fcHJvamVjdC/QmtC70LDRgdGC0LXRgCBrYWxrcHJvLWs4cy9pbmZyYXN0cnVjdHVyZS9iYWxhbmNlciIgewogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSBhcHBfYmFsYW5jZXIgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gIks4cyBJbmdyZXNzIG5naW54XG5yZXBsaWNhczogWDIiCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHsKICAgICAgICAgICAgICAgICAgICAicmVwbGljYXMiICIyIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAhcmVmICJEZXBsb3ltZW50Tm9kZTovL1Byb2R1Y3Rpb24vQ2xvUnUva2Fsa3Byb19wcm9qZWN0L9Ca0LvQsNGB0YLQtdGAIGthbGtwcm8tazhzL2luZnJhc3RydWN0dXJlL3Bnc3FsIiB7CiAgICAgICAgICAgIHRlY2hub2xvZ3kgInBvc3RncmVzIDE3IG9wZXJhdG9yIDUwME1pIgogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSBkYl9vcHRpc3RhaXJzIHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uICJkYjogb3B0aXN0YWlyc1xucmVwbGljYXM6IFgyIgogICAgICAgICAgICAgICAgcHJvcGVydGllcyB7CiAgICAgICAgICAgICAgICAgICAgInJlcGxpY2FzIiAiMiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgIXJlZiAiRGVwbG95bWVudE5vZGU6Ly9Qcm9kdWN0aW9uL0Nsb1J1L2thbGtwcm9fcHJvamVjdC/QmtC70LDRgdGC0LXRgCBrYWxrcHJvLWs4cy9pbmZyYXN0cnVjdHVyZS9rYWZrYSIgewogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSB0b3BpY19yZXF1ZXN0X3N0cmFpZ2h0X3N0YWlyCiAgICAgICAgICAgIGNvbnRhaW5lckluc3RhbmNlIHRvcGljX3JlcXVlc3RfbF9zaGFwZV9zdGFpcgogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSB0b3BpY19yZXF1ZXN0X3Vfc2hhcGVfc3RhaXIKICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgdG9waWNfY2FsY3VsYXRpb25fcHJvZ3Jlc3MKICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgdG9waWNfY2FsY3VsYXRpb25fcmVzdWx0CiAgICAgICAgfQoKICAgICAgICAhcmVmICJEZXBsb3ltZW50Tm9kZTovL1Byb2R1Y3Rpb24vQ2xvUnUva2Fsa3Byb19wcm9qZWN0L9Ca0LvQsNGB0YLQtdGAIGthbGtwcm8tazhzL29wdGlzdGFpci1jYWxjIiB7CiAgICAgICAgICAgIGNvbnRhaW5lckluc3RhbmNlIGFwcF9yZXF1ZXN0X21hbmFnZXIgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gInJlcGxpY2FzOiBYMiIKICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgewogICAgICAgICAgICAgICAgICAgICJyZXBsaWNhcyIgIjIiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgYXBwX3N0cmFpZ2h0X3N0YWlyX2NhbGMgewogICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gInJlcGxpY2FzOiBYMiIKICAgICAgICAgICAgICAgIHByb3BlcnRpZXMgewogICAgICAgICAgICAgICAgICAgICJyZXBsaWNhcyIgIjIiCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29udGFpbmVySW5zdGFuY2UgYXBwX2xfc2hhcGVfc3RhaXJfY2FsYyB7CiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiAicmVwbGljYXM6IFgyIgogICAgICAgICAgICAgICAgcHJvcGVydGllcyB7CiAgICAgICAgICAgICAgICAgICAgInJlcGxpY2FzIiAiMiIKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBjb250YWluZXJJbnN0YW5jZSBhcHBfdV9zaGFwZV9zdGFpcl9jYWxjIHsKICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uICJyZXBsaWNhczogWDIiCiAgICAgICAgICAgICAgICBwcm9wZXJ0aWVzIHsKICAgICAgICAgICAgICAgICAgICAicmVwbGljYXMiICIyIgogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQoKICAgIHZpZXdzIHsKICAgICAgICBzeXN0ZW1Db250ZXh0IHN5c3RlbV9vcHRpc3RhaXJfY2FsYyBPUFRJU1RBSVJfQ0FMQ19DNEwxICLQn9C+0LTQsdC+0YAg0L7Qv9GC0LjQvNCw0LvRjNC90L7QuSDQutC+0L3RhC4g0LvQtdGB0YLQvdC40YbRiyAtINCa0L7QvdGC0LXQutGB0YLQvdCw0Y8g0LTQuNCw0LPRgNCw0LzQvNCwIiB7CiAgICAgICAgICAgIGF1dG9MYXlvdXQKICAgICAgICAgICAgaW5jbHVkZSAtPnN5c3RlbV9vcHRpc3RhaXJfY2FsYy0+CiAgICAgICAgfQogICAgICAgIGNvbnRhaW5lciBzeXN0ZW1fb3B0aXN0YWlyX2NhbGMgT1BUSVNUQUlSX0NBTENfQzRMMiAi0J/QvtC00LHQvtGAINC+0L/RgtC40LzQsNC70YzQvdC+0Lkg0LrQvtC90YQuINC70LXRgdGC0L3QuNGG0YsiIHsKICAgICAgICAgICAgYXV0b0xheW91dAogICAgICAgICAgICBpbmNsdWRlICoKICAgICAgICAgICAgaW5jbHVkZSBleHRfcGVyc29uX3dlYgogICAgICAgICAgICBpbmNsdWRlIHN5c3RlbV93ZWJfc2l0ZQogICAgICAgICAgICBpbmNsdWRlIHN5c3RlbV9hcGlfZ2F0ZXdhaQogICAgICAgIH0KICAgICAgICBkZXBsb3ltZW50IHN5c3RlbV9vcHRpc3RhaXJfY2FsYyBEZXZlbG9wbWVudCBPUFRJU1RBSVJfQ0FMQ19ERVBMT1lfREVWICLQn9C+0LTQsdC+0YAg0L7Qv9GC0LjQvNCw0LvRjNC90L7QuSDQutC+0L3RhC4g0LvQtdGB0YLQvdC40YbRiyIgewogICAgICAgICAgICBhdXRvTGF5b3V0CiAgICAgICAgICAgIGluY2x1ZGUgKgogICAgICAgICAgICBleGNsdWRlICJlbGVtZW50LnRhZz09U29mdHdhcmUgU3lzdGVtIgogICAgICAgICAgICBleGNsdWRlICJlbGVtZW50LnRhZz09SW5mcmFzdHJ1Y3R1cmUgTm9kZSIKICAgICAgICB9CiAgICAgICAgZGVwbG95bWVudCBzeXN0ZW1fb3B0aXN0YWlyX2NhbGMgUHJvZHVjdGlvbiBPUFRJU1RBSVJfQ0FMQ19ERVBMT1lfUFJPRCAi0J/QvtC00LHQvtGAINC+0L/RgtC40LzQsNC70YzQvdC+0Lkg0LrQvtC90YQuINC70LXRgdGC0L3QuNGG0YsiIHsKICAgICAgICAgICAgYXV0b0xheW91dAogICAgICAgICAgICBpbmNsdWRlICoKICAgICAgICAgICAgZXhjbHVkZSAiZWxlbWVudC50YWc9PVNvZnR3YXJlIFN5c3RlbSIKICAgICAgICAgICAgZXhjbHVkZSAiZWxlbWVudC50YWc9PUluZnJhc3RydWN0dXJlIE5vZGUiCiAgICAgICAgfQogICAgfQp9"
  },
  "views" : {
    "configuration" : {
      "branding" : { },
      "lastSavedView" : "OPTISTAIR_CALC_C4L2",
      "metadataSymbols" : "SquareBrackets",
      "styles" : {
        "elements" : [ {
          "background" : "#1168bd",
          "color" : "#000000",
          "shape" : "RoundedBox",
          "tag" : "Element"
        }, {
          "background" : "#1168bd",
          "color" : "#ffffff",
          "tag" : "Software System"
        }, {
          "background" : "#cccccc",
          "tag" : "external"
        }, {
          "shape" : "WebBrowser",
          "tag" : "web"
        }, {
          "background" : "#85bbf0",
          "shape" : "Cylinder",
          "tag" : "storage"
        }, {
          "background" : "#85bbf0",
          "shape" : "Pipe",
          "tag" : "queue"
        }, {
          "background" : "#85bbf0",
          "shape" : "Folder",
          "tag" : "folder"
        }, {
          "background" : "#85bbf0",
          "tag" : "proxy"
        }, {
          "background" : "#ffffff",
          "color" : "#999999",
          "tag" : "infrastructure"
        }, {
          "background" : "#f085bb",
          "color" : "#ffffff",
          "tag" : "obsolete"
        }, {
          "background" : "#f035bb",
          "color" : "#ffffff",
          "tag" : "tagArchDebt"
        }, {
          "background" : "#a5abd0",
          "color" : "#ffffff",
          "shape" : "Cylinder",
          "tag" : "tagStorageDev"
        }, {
          "background" : "#438dd5",
          "color" : "#ffffff",
          "tag" : "Container"
        }, {
          "background" : "#85bbf0",
          "color" : "#000000",
          "tag" : "Component"
        }, {
          "background" : "#08427b",
          "color" : "#ffffff",
          "shape" : "Person",
          "tag" : "Person"
        }, {
          "description" : true,
          "fontSize" : 40,
          "metadata" : true,
          "tag" : "Boundary"
        }, {
          "color" : "#2e3a50",
          "description" : true,
          "fontSize" : 32,
          "metadata" : true,
          "tag" : "Group"
        } ],
        "relationships" : [ {
          "color" : "#f035bb",
          "tag" : "tagArchDebt"
        }, {
          "color" : "#198f31",
          "tag" : "tagToBe"
        }, {
          "color" : "#059e05",
          "tag" : "tagFrontReq"
        }, {
          "color" : "#0d38ea",
          "tag" : "tagBackReq"
        } ]
      },
      "terminology" : { }
    },
    "containerViews" : [ {
      "automaticLayout" : {
        "applied" : true,
        "edgeSeparation" : 0,
        "implementation" : "Graphviz",
        "nodeSeparation" : 300,
        "rankDirection" : "TopBottom",
        "rankSeparation" : 300,
        "vertices" : false
      },
      "description" : "Подбор оптимальной конф. лестницы",
      "dimensions" : {
        "height" : 3923,
        "width" : 4640
      },
      "elements" : [ {
        "id" : "1",
        "x" : 2081,
        "y" : 152
      }, {
        "id" : "4",
        "x" : 2056,
        "y" : 1452
      }, {
        "id" : "5",
        "x" : 2056,
        "y" : 852
      }, {
        "id" : "87",
        "x" : 969,
        "y" : 3252
      }, {
        "id" : "88",
        "x" : 3969,
        "y" : 3252
      }, {
        "id" : "89",
        "x" : 2469,
        "y" : 3252
      }, {
        "id" : "90",
        "x" : 219,
        "y" : 3252
      }, {
        "id" : "91",
        "x" : 1719,
        "y" : 3252
      }, {
        "id" : "92",
        "x" : 3219,
        "y" : 3252
      }, {
        "id" : "93",
        "x" : 2056,
        "y" : 2052
      }, {
        "id" : "94",
        "x" : 2056,
        "y" : 2652
      }, {
        "id" : "101",
        "x" : 3556,
        "y" : 2052
      }, {
        "id" : "107",
        "x" : 2806,
        "y" : 2052
      }, {
        "id" : "113",
        "x" : 1306,
        "y" : 2052
      } ],
      "externalSoftwareSystemBoundariesVisible" : false,
      "key" : "OPTISTAIR_CALC_C4L2",
      "order" : 2,
      "relationships" : [ {
        "id" : "100"
      }, {
        "id" : "102",
        "vertices" : [ {
          "x" : 3031,
          "y" : 2502
        } ]
      }, {
        "id" : "103",
        "vertices" : [ {
          "x" : 3086,
          "y" : 2641
        } ]
      }, {
        "id" : "104",
        "vertices" : [ {
          "x" : 2975,
          "y" : 2362
        } ]
      }, {
        "id" : "105"
      }, {
        "id" : "106"
      }, {
        "id" : "108",
        "vertices" : [ {
          "x" : 2656,
          "y" : 2502
        } ]
      }, {
        "id" : "109",
        "vertices" : [ {
          "x" : 2749,
          "y" : 2619
        } ]
      }, {
        "id" : "11"
      }, {
        "id" : "110",
        "vertices" : [ {
          "x" : 2562,
          "y" : 2384
        } ]
      }, {
        "id" : "111"
      }, {
        "id" : "112"
      }, {
        "id" : "114",
        "vertices" : [ {
          "x" : 1906,
          "y" : 2502
        } ]
      }, {
        "id" : "115",
        "vertices" : [ {
          "x" : 1999,
          "y" : 2384
        } ]
      }, {
        "id" : "116",
        "vertices" : [ {
          "x" : 1812,
          "y" : 2619
        } ]
      }, {
        "id" : "117"
      }, {
        "id" : "118",
        "vertices" : [ {
          "x" : 1906,
          "y" : 2952
        }, {
          "x" : 3069,
          "y" : 3252
        } ]
      }, {
        "id" : "119",
        "vertices" : [ {
          "x" : 2131,
          "y" : 2502
        } ]
      }, {
        "id" : "120",
        "vertices" : [ {
          "x" : 2431,
          "y" : 2502
        } ]
      }, {
        "id" : "121",
        "vertices" : [ {
          "x" : 1981,
          "y" : 2502
        } ]
      }, {
        "id" : "122",
        "vertices" : [ {
          "x" : 2581,
          "y" : 2502
        } ]
      }, {
        "id" : "123",
        "vertices" : [ {
          "x" : 1831,
          "y" : 2502
        } ]
      }, {
        "id" : "124",
        "vertices" : [ {
          "x" : 2731,
          "y" : 2502
        } ]
      }, {
        "id" : "125",
        "vertices" : [ {
          "x" : 2281,
          "y" : 1902
        } ]
      }, {
        "id" : "126",
        "vertices" : [ {
          "x" : 2431,
          "y" : 1902
        } ]
      }, {
        "id" : "127",
        "vertices" : [ {
          "x" : 2131,
          "y" : 1902
        } ]
      }, {
        "id" : "17",
        "vertices" : [ {
          "x" : 2281,
          "y" : 1302
        } ]
      }, {
        "id" : "18",
        "vertices" : [ {
          "x" : 2431,
          "y" : 1302
        } ]
      }, {
        "id" : "19",
        "vertices" : [ {
          "x" : 2131,
          "y" : 1302
        } ]
      }, {
        "id" : "95"
      }, {
        "id" : "96",
        "vertices" : [ {
          "x" : 3819,
          "y" : 3252
        } ]
      }, {
        "id" : "97"
      }, {
        "id" : "98",
        "vertices" : [ {
          "x" : 819,
          "y" : 3252
        } ]
      }, {
        "id" : "99"
      } ],
      "softwareSystemId" : "9"
    } ],
    "deploymentViews" : [ {
      "automaticLayout" : {
        "applied" : true,
        "edgeSeparation" : 0,
        "implementation" : "Graphviz",
        "nodeSeparation" : 300,
        "rankDirection" : "TopBottom",
        "rankSeparation" : 300,
        "vertices" : false
      },
      "description" : "Подбор оптимальной конф. лестницы",
      "dimensions" : {
        "height" : 2455,
        "width" : 4876
      },
      "elements" : [ {
        "id" : "30",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "31",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "32",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "33",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "39",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "41",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "42",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "44",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "128",
        "x" : 4063,
        "y" : 252
      }, {
        "id" : "129",
        "x" : 4063,
        "y" : 1452
      }, {
        "id" : "130",
        "x" : 2684,
        "y" : 852
      }, {
        "id" : "138",
        "x" : 2684,
        "y" : 252
      }, {
        "id" : "142",
        "x" : 1934,
        "y" : 252
      }, {
        "id" : "146",
        "x" : 1184,
        "y" : 252
      }, {
        "id" : "150",
        "x" : 3300,
        "y" : 1452
      }, {
        "id" : "153",
        "x" : 1800,
        "y" : 1452
      }, {
        "id" : "156",
        "x" : 300,
        "y" : 1452
      }, {
        "id" : "159",
        "x" : 2550,
        "y" : 1452
      }, {
        "id" : "161",
        "x" : 1050,
        "y" : 1452
      } ],
      "environment" : "Development",
      "key" : "OPTISTAIR_CALC_DEPLOY_DEV",
      "order" : 3,
      "relationships" : [ {
        "id" : "131",
        "vertices" : [ {
          "x" : 3180,
          "y" : 657
        } ]
      }, {
        "id" : "132",
        "vertices" : [ {
          "x" : 3480,
          "y" : 657
        } ]
      }, {
        "id" : "133",
        "vertices" : [ {
          "x" : 3780,
          "y" : 657
        } ]
      }, {
        "id" : "134",
        "vertices" : [ {
          "x" : 4080,
          "y" : 657
        } ]
      }, {
        "id" : "135",
        "vertices" : [ {
          "x" : 4380,
          "y" : 657
        } ]
      }, {
        "id" : "136",
        "vertices" : [ {
          "x" : 4680,
          "y" : 657
        } ]
      }, {
        "id" : "137",
        "vertices" : [ {
          "x" : 3930,
          "y" : 1348
        } ]
      }, {
        "id" : "139",
        "vertices" : [ {
          "x" : 2909,
          "y" : 702
        } ]
      }, {
        "id" : "140",
        "vertices" : [ {
          "x" : 3059,
          "y" : 702
        } ]
      }, {
        "id" : "141",
        "vertices" : [ {
          "x" : 2759,
          "y" : 702
        } ]
      }, {
        "id" : "143",
        "vertices" : [ {
          "x" : 2534,
          "y" : 702
        } ]
      }, {
        "id" : "144",
        "vertices" : [ {
          "x" : 2627,
          "y" : 584
        } ]
      }, {
        "id" : "145",
        "vertices" : [ {
          "x" : 2440,
          "y" : 819
        } ]
      }, {
        "id" : "147",
        "vertices" : [ {
          "x" : 1484,
          "y" : 657
        } ]
      }, {
        "id" : "148",
        "vertices" : [ {
          "x" : 1784,
          "y" : 657
        } ]
      }, {
        "id" : "149",
        "vertices" : [ {
          "x" : 2084,
          "y" : 657
        } ]
      }, {
        "id" : "151"
      }, {
        "id" : "152",
        "vertices" : [ {
          "x" : 3284,
          "y" : 852
        } ]
      }, {
        "id" : "154"
      }, {
        "id" : "155"
      }, {
        "id" : "157",
        "vertices" : [ {
          "x" : 900,
          "y" : 1348
        } ]
      }, {
        "id" : "158"
      }, {
        "id" : "160"
      }, {
        "id" : "162",
        "vertices" : [ {
          "x" : 2455,
          "y" : 1152
        }, {
          "x" : 1650,
          "y" : 1348
        } ]
      }, {
        "id" : "163"
      }, {
        "id" : "164"
      }, {
        "id" : "165"
      } ],
      "softwareSystemId" : "9"
    }, {
      "automaticLayout" : {
        "applied" : true,
        "edgeSeparation" : 0,
        "implementation" : "Graphviz",
        "nodeSeparation" : 300,
        "rankDirection" : "TopBottom",
        "rankSeparation" : 300,
        "vertices" : false
      },
      "description" : "Подбор оптимальной конф. лестницы",
      "dimensions" : {
        "height" : 1835,
        "width" : 7922
      },
      "elements" : [ {
        "id" : "72",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "73",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "74",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "75",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "77",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "78",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "79",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "80",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "81",
        "x" : 175,
        "y" : 175
      }, {
        "id" : "166",
        "x" : 7171,
        "y" : 832
      }, {
        "id" : "167",
        "x" : 6408,
        "y" : 832
      }, {
        "id" : "168",
        "x" : 5646,
        "y" : 832
      }, {
        "id" : "169",
        "x" : 3396,
        "y" : 832
      }, {
        "id" : "170",
        "x" : 2646,
        "y" : 832
      }, {
        "id" : "171",
        "x" : 4896,
        "y" : 832
      }, {
        "id" : "172",
        "x" : 4146,
        "y" : 832
      }, {
        "id" : "173",
        "x" : 1779,
        "y" : 832
      }, {
        "id" : "186",
        "x" : 1779,
        "y" : 232
      }, {
        "id" : "192",
        "x" : 1029,
        "y" : 232
      }, {
        "id" : "198",
        "x" : 279,
        "y" : 232
      } ],
      "environment" : "Production",
      "key" : "OPTISTAIR_CALC_DEPLOY_PROD",
      "order" : 4,
      "relationships" : [ {
        "id" : "174",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6995,
          "y" : 611
        }, {
          "x" : 2510,
          "y" : 611
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "175",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6952,
          "y" : 598
        }, {
          "x" : 2552,
          "y" : 598
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "176",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6909,
          "y" : 585
        }, {
          "x" : 2595,
          "y" : 585
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "177",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6866,
          "y" : 571
        }, {
          "x" : 2638,
          "y" : 571
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "178",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6823,
          "y" : 558
        }, {
          "x" : 2681,
          "y" : 558
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "179",
        "vertices" : [ {
          "x" : 7038,
          "y" : 624
        }, {
          "x" : 6780,
          "y" : 545
        }, {
          "x" : 2724,
          "y" : 545
        }, {
          "x" : 2467,
          "y" : 624
        } ]
      }, {
        "id" : "180",
        "vertices" : [ {
          "x" : 2467,
          "y" : 624
        }, {
          "x" : 2617,
          "y" : 578
        }, {
          "x" : 3846,
          "y" : 578
        }, {
          "x" : 3996,
          "y" : 624
        } ]
      }, {
        "id" : "181",
        "vertices" : [ {
          "x" : 2467,
          "y" : 624
        }, {
          "x" : 2617,
          "y" : 578
        }, {
          "x" : 6125,
          "y" : 578
        }, {
          "x" : 6275,
          "y" : 624
        } ]
      }, {
        "id" : "182",
        "vertices" : [ {
          "x" : 2293,
          "y" : 982
        }, {
          "x" : 2582,
          "y" : 982
        } ]
      }, {
        "id" : "183",
        "vertices" : [ {
          "x" : 2467,
          "y" : 624
        }, {
          "x" : 2617,
          "y" : 578
        }, {
          "x" : 3096,
          "y" : 578
        }, {
          "x" : 3246,
          "y" : 624
        } ]
      }, {
        "id" : "184",
        "vertices" : [ {
          "x" : 2467,
          "y" : 624
        }, {
          "x" : 2617,
          "y" : 578
        }, {
          "x" : 4596,
          "y" : 578
        }, {
          "x" : 4746,
          "y" : 624
        } ]
      }, {
        "id" : "185",
        "vertices" : [ {
          "x" : 2467,
          "y" : 624
        }, {
          "x" : 2617,
          "y" : 578
        }, {
          "x" : 5346,
          "y" : 578
        }, {
          "x" : 5496,
          "y" : 624
        } ]
      }, {
        "id" : "187",
        "vertices" : [ {
          "x" : 3996,
          "y" : 624
        } ]
      }, {
        "id" : "188",
        "vertices" : [ {
          "x" : 2004,
          "y" : 682
        } ]
      }, {
        "id" : "189",
        "vertices" : [ {
          "x" : 2154,
          "y" : 682
        } ]
      }, {
        "id" : "190",
        "vertices" : [ {
          "x" : 1854,
          "y" : 682
        } ]
      }, {
        "id" : "191",
        "vertices" : [ {
          "x" : 5496,
          "y" : 624
        } ]
      }, {
        "id" : "193",
        "vertices" : [ {
          "x" : 1629,
          "y" : 532
        }, {
          "x" : 3996,
          "y" : 624
        } ]
      }, {
        "id" : "194",
        "vertices" : [ {
          "x" : 1629,
          "y" : 532
        }, {
          "x" : 3246,
          "y" : 624
        } ]
      }, {
        "id" : "195",
        "vertices" : [ {
          "x" : 1629,
          "y" : 682
        } ]
      }, {
        "id" : "196",
        "vertices" : [ {
          "x" : 1722,
          "y" : 564
        } ]
      }, {
        "id" : "197",
        "vertices" : [ {
          "x" : 1535,
          "y" : 799
        } ]
      }, {
        "id" : "199",
        "vertices" : [ {
          "x" : 879,
          "y" : 532
        }, {
          "x" : 3996,
          "y" : 624
        } ]
      }, {
        "id" : "200",
        "vertices" : [ {
          "x" : 879,
          "y" : 532
        }, {
          "x" : 2408,
          "y" : 624
        } ]
      }, {
        "id" : "201",
        "vertices" : [ {
          "x" : 1254,
          "y" : 682
        } ]
      }, {
        "id" : "202",
        "vertices" : [ {
          "x" : 1309,
          "y" : 542
        } ]
      }, {
        "id" : "203",
        "vertices" : [ {
          "x" : 1198,
          "y" : 821
        } ]
      } ],
      "softwareSystemId" : "9"
    } ],
    "systemContextViews" : [ {
      "automaticLayout" : {
        "applied" : true,
        "edgeSeparation" : 0,
        "implementation" : "Graphviz",
        "nodeSeparation" : 300,
        "rankDirection" : "TopBottom",
        "rankSeparation" : 300,
        "vertices" : false
      },
      "description" : "Подбор оптимальной конф. лестницы - Контекстная диаграмма",
      "dimensions" : {
        "height" : 1300,
        "width" : 1404
      },
      "elements" : [ {
        "id" : "4",
        "x" : 474,
        "y" : 152
      }, {
        "id" : "9",
        "x" : 474,
        "y" : 752
      } ],
      "enterpriseBoundaryVisible" : true,
      "key" : "OPTISTAIR_CALC_C4L1",
      "order" : 1,
      "relationships" : [ {
        "id" : "20",
        "vertices" : [ {
          "x" : 699,
          "y" : 602
        } ]
      }, {
        "id" : "21",
        "vertices" : [ {
          "x" : 849,
          "y" : 602
        } ]
      }, {
        "id" : "22",
        "vertices" : [ {
          "x" : 549,
          "y" : 602
        } ]
      } ],
      "softwareSystemId" : "9"
    } ]
  }
}